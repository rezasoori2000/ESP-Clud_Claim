(this.webpackJsonpESPCC=this.webpackJsonpESPCC||[]).push([[0],{248:function(e,t,n){},329:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(24),i=n.n(s),o=(n(329),n(150)),c=n(8),l=n(36),d=n(37),j=n(39),b=n(40),u=(n(248),n(14)),h=n(13),m=n(507),p=n(506),g=n(503),O=n(513),x=n(548),f=n(409),y=n(225),v=n.n(y),S=n(407),C=n(274),k=n(504),P=n(408),I=n(262),w=n.n(I),T=n(508),L=n(505),A=n(151),J=n.n(A),B=n(498),N=n(556),R=n(63),W=n(509),E=n(558),z=n(501),D=n(551),F=n(502),M=n(156),G=n(58),U=n(1),V=Object(B.a)((function(e){return{root:{width:"100%",backgroundColor:"#3a3d57",color:"#fff!important",fontSize:"0.7rem"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}}));function H(e,t){if(t&&t.length>1)return"(".concat(t,")")}function _(e,t,n,a){switch(n){case 1:return H(0,e.texts[0]);case 2:return H(0,e.texts[1]);case 3:return H(0,e.texts[2]);default:return""}}var Q=function(e){var t=V(),n=["Start","Login","Job Selection","WorkType Selection","Claiming","Finish"];return e.step>0&&Object(U.jsxs)("div",{className:t.root,children:[Object(U.jsx)(E.a,{activeStep:e.step-1,orientation:"vertical",className:t.root,children:n.map((function(n,a){return!(e.isAdmin&&3===a)&&Object(U.jsxs)(z.a,{children:[Object(U.jsx)(D.a,{children:Object(U.jsxs)(G.a,{style:{color:"white",fontSize:"0.8rem"},children:[n,Object(U.jsx)("br",{}),Object(U.jsxs)("span",{children:[" ",_(e,0,a)]})]})}),Object(U.jsxs)(F.a,{children:[Object(U.jsx)(G.a,{}),Object(U.jsx)("div",{className:t.actionsContainer,children:Object(U.jsx)("div",{})})]})]},n)}))}),e.step-1===n.length&&Object(U.jsx)(M.a,{square:!0,elevation:0,className:t.resetContainer,children:Object(U.jsx)(G.a,{children:"All steps completed - you're finished"})})]})},Y=n(78),Z=n.n(Y),q=n(263),K=n.n(q),X=n(264),$=n.n(X),ee=n(92),te=void 0,ne=function(e){var t=e.menuSize,n=Object(B.a)((function(e){return Object(N.a)({listItemText:{fontSize:"0.8rem"},root:{display:"flex"},drawer:Object(h.a)({},e.breakpoints.up("sm"),{width:t,flexShrink:0}),appBar:Object(h.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(t,"px)"),marginLeft:t,background:"#ebedf1",color:"Black"}),menuButton:Object(h.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:t},content:{flexGrow:1,padding:e.spacing(3)},link:{textDecoration:"none",color:"#fff"},whiteColor:{color:"#fff"}})}))(),a=r.a.useState(!1),s=Object(u.a)(a,2),i=s[0],o=s[1],c=(new ee.a,function(){o(!i)}),l=Object(U.jsxs)("div",{style:{backgroundColor:"#242845",height:"100%",fontSize:"0.7rem"},children:[Object(U.jsx)("div",{className:"theme.mixins.toolbar, drawerPaper: 200"}),Object(U.jsx)(g.a,{}),Object(U.jsxs)(S.a,{className:"mt-5",children:[Object(U.jsx)("div",{style:{textAlign:"center",background:"#000"},children:Object(U.jsx)("img",{src:"./favicon.png",alt:"APL"})}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),e.isSystemAdmin&&Object(U.jsxs)("div",{children:[Object(U.jsx)(R.b,{to:"./claim",style:{textDecoration:"none",color:"#fff"},children:Object(U.jsxs)(C.a,{button:!0,children:[Object(U.jsxs)(k.a,{style:{color:"#fff"},children:[Object(U.jsx)(v.a,{})," "]}),Object(U.jsx)(P.a,{primary:"Claim",classes:{primary:n.listItemText},children:Object(U.jsx)("h4",{children:"Claim"})})]},"1")}),Object(U.jsx)(R.b,{to:"./settings",style:{textDecoration:"none",color:"#fff"},children:Object(U.jsxs)(C.a,{button:!0,children:[Object(U.jsxs)(k.a,{style:{color:"#fff"},children:[Object(U.jsx)(J.a,{})," "]}),Object(U.jsx)(P.a,{primary:"Admin Settings",classes:{primary:n.listItemText}})]},"2")}),Object(U.jsx)(R.b,{to:"./ProductionBoard",style:{textDecoration:"none",color:"#fff"},children:Object(U.jsxs)(C.a,{button:!0,children:[Object(U.jsxs)(k.a,{style:{color:"#fff"},children:[Object(U.jsx)(J.a,{})," "]}),Object(U.jsx)(P.a,{primary:"Production\xa0Board",classes:{primary:n.listItemText}})]},"2")}),Object(U.jsx)(R.b,{to:"./users",style:{textDecoration:"none",color:"#fff"},children:Object(U.jsxs)(C.a,{button:!0,children:[Object(U.jsxs)(k.a,{style:{color:"#fff"},children:[Object(U.jsx)(J.a,{})," "]}),Object(U.jsx)(P.a,{primary:"User\xa0Management",classes:{primary:n.listItemText}})]},"2")}),Object(U.jsx)(Q,{step:e.step,texts:e.texts,isAdmin:e.isAdmin}),Object(U.jsx)(g.a,{}),Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{color:"#fff",marginTop:"30px"},onClick:function(){(new ee.a).set("_claim",null,{path:"/"}),document.cookie="_claim=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.reload(!0),window.location.href="".concat(te.props.mainRoute)},startIcon:Object(U.jsx)(Z.a,{}),children:"Logout"})]}),!e.isSystemAdmin&&Object(U.jsxs)("div",{children:[Object(U.jsx)(R.b,{to:"./claim",style:{textDecoration:"none",color:"#fff"},children:Object(U.jsxs)(C.a,{button:!0,children:[Object(U.jsxs)(k.a,{style:{color:"#fff"},children:[Object(U.jsx)(v.a,{})," "]}),Object(U.jsx)(P.a,{primary:"Claim",classes:{primary:n.listItemText},children:Object(U.jsx)("h4",{children:"Claim"})})]},"1")}),e.ShowProductionBoard&&Object(U.jsx)(R.b,{to:"./ProductionBoard",style:{textDecoration:"none",color:"#fff"},children:Object(U.jsxs)(C.a,{button:!0,children:[Object(U.jsxs)(k.a,{style:{color:"#fff"},children:[Object(U.jsx)(J.a,{})," "]}),Object(U.jsx)(P.a,{primary:"Production\xa0Board",classes:{primary:n.listItemText}})]},"2")}),Object(U.jsx)(Q,{step:e.step,texts:e.texts,isAdmin:e.isAdmin}),Object(U.jsx)(L.a,{variant:"outlined",size:"small",color:"white",style:{color:"#fff",marginTop:"30px"},onClick:function(){(new ee.a).set("_claim",null,{path:"/"}),document.cookie="_claim=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.reload(!0),window.location.href="".concat(te.props.mainRoute)},startIcon:Object(U.jsx)(Z.a,{}),children:"Logout"})]})]}),Object(U.jsx)(g.a,{})]});return Object(U.jsxs)("div",{children:[Object(U.jsx)(p.a,{}),Object(U.jsx)(m.a,{position:"fixed",className:n.appBar,children:Object(U.jsxs)(T.a,{style:{backgroundColor:"#fff",color:"black"},children:[Object(U.jsx)(f.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:c,className:n.menuButton,children:Object(U.jsx)(w.a,{})}),Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsx)(W.a,{item:!0,lg:1,children:Object(U.jsx)(x.a,{only:"xs",children:Object(U.jsx)(L.a,{onClick:function(){e.changeMenuSize()},startIcon:240===e.menuSize?Object(U.jsx)(K.a,{}):Object(U.jsx)($.a,{})})})}),Object(U.jsx)(W.a,{item:!0,lg:10,children:Object(U.jsxs)("p",{children:[Object(U.jsx)("span",{style:{fontSize:"20px",fontWeight:"bolder",textShadow:"1px 2px 3px #666",color:"#000000",background:"#FFFFFF"},children:"ESPCC"}),Object(U.jsxs)("span",{style:{paddingLeft:10},children:["(","1",".","0",".","1",")"]})]})}),Object(U.jsx)(W.a,{item:!0,lg:1})]})]})}),Object(U.jsxs)("nav",{className:n.drawer,"aria-label":"mailbox folders",children:[Object(U.jsx)(x.a,{smUp:!0,implementation:"css",children:Object(U.jsx)(O.a,{variant:"temporary",anchor:"left",open:i,onClose:c,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0},children:l})}),Object(U.jsx)(x.a,{xsDown:!0,implementation:"css",children:Object(U.jsx)(O.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0,children:l})})]})]})},ae=n(34),re=function(){return Object(U.jsx)("div",{children:Object(U.jsx)("h1",{children:"the Performance page"})})},se=n(19),ie=n.n(se),oe=n(28),ce=n(516),le=n(518),de=n(519),je=n(422),be=n(514),ue=n(415),he=n(420),me=function(e){var t=e.name,n=e.label,a=e.helptext,r=e.onPropertyChange,s=e.items;return s?Object(U.jsxs)(ue.a,{fullWidth:!0,variant:"outlined",style:{marginBottom:20},children:[n,Object(U.jsxs)(je.a,{labelId:"demo-simple-select-outlined-label",id:t,value:s&&s.length>0&&s.filter((function(e){return e.Selected})).length>0?s.filter((function(e){return e.Selected}))[0].Value:-1,onChange:r,name:t,type:"select",children:[Object(U.jsx)(be.a,{value:"-1",children:Object(U.jsx)("em",{children:"Select"})}),s&&s.map((function(e){return Object(U.jsx)(be.a,{value:e.Value,children:e.Text},e.Value)}))]}),Object(U.jsx)(he.a,{children:a})]}):Object(U.jsx)("div",{})},pe=n(424),ge=function(e){var t=e.name,n=e.label,a=e.helptext,r=e.value,s=e.type,i=void 0===s?"text":s,o=e.onPropertyChange;return Object(U.jsxs)(ue.a,{variant:"outlined",fullWidth:!0,style:{marginBottom:20},children:[n,Object(U.jsx)(pe.a,{value:r||"",name:t,type:i,id:t,label:n,onChange:o,fullWidth:!0}),Object(U.jsx)(he.a,{children:a})]})},Oe=n(549),xe=n(515),fe=r.a.memo((function(e){var t=e.name,n=e.label,a=e.checked,r=e.onPropertyChange,s=e.row,i=void 0===s?12:s;return Object(U.jsx)(W.a,{item:!0,lg:i,children:Object(U.jsx)(xe.a,{style:{marginBottom:20},control:Object(U.jsx)(Oe.a,{checked:"undefined"!==typeof a&&a,onChange:r,name:t,id:t,color:"primary"}),label:n})})})),ye=n(517),ve=n(557),Se=n(72),Ce=n.n(Se),ke=n(552),Pe=n(550),Ie=n(545),we=n(554),Te=n(553),Le={PaperProps:{style:{maxHeight:224,width:250}}},Ae=function(e){var t=Object(B.a)((function(e){return Object(N.a)({root:{minWidth:275,display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},saveBtn:{marginTop:40},saveBtnTop:{marginTop:10}})}))();return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),void 0!==e.adminSettings.Groups&&Object(U.jsxs)("div",{children:[Object(U.jsxs)(ce.a,{children:[Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsx)(W.a,{item:!0,lg:10,children:Object(U.jsx)(ye.a,{title:"Database Settings",subheader:"ESP database connection settings ",avatar:Object(U.jsxs)(ve.a,{"aria-label":"recipe",style:{backgroundColor:"blue"},children:[" ","D"," "]})})}),Object(U.jsx)(W.a,{item:!0,lg:2,children:Object(U.jsx)(L.a,{variant:"contained",color:"primary",className:t.saveBtnTop,size:"medium",onClick:e.onSave,startIcon:Object(U.jsx)(Ce.a,{}),children:"Save"})})]}),Object(U.jsx)(le.a,{}),Object(U.jsx)(le.a,{children:Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsxs)(W.a,{item:!0,lg:6,children:[Object(U.jsx)(de.a,{id:"ServerAddress",label:"DB Server",style:{margin:8},disabled:!0,placeholder:"DB Server",helperText:"Database Server Address",fullWidth:!0,margin:"normal",value:e.adminSettings.ServerAddress||"",InputLabelProps:{shrink:!0}}),Object(U.jsx)(de.a,{id:"Username",label:"Login",style:{margin:8},disabled:!0,placeholder:"Login",value:e.adminSettings.Username||"",helperText:"Database Username",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})]}),Object(U.jsxs)(W.a,{item:!0,lg:6,children:[Object(U.jsx)(de.a,{id:"DatabaseName",label:"DB Name",style:{margin:8},disabled:!0,placeholder:"Database Name",helperText:"Database Name",fullWidth:!0,value:e.adminSettings.DatabaseName||"",margin:"normal",InputLabelProps:{shrink:!0}}),Object(U.jsx)(de.a,{id:"Password",label:"Password",style:{margin:8},disabled:!0,value:e.adminSettings.Password||"",placeholder:"Placeholder",helperText:"Database password",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})]})]})})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(ce.a,{children:[Object(U.jsx)(ye.a,{title:"General Settings",subheader:"Job Claim section settings ",avatar:Object(U.jsxs)(ve.a,{"aria-label":"recipe",style:{backgroundColor:"blue"},children:[" ","G"," "]})}),Object(U.jsx)(le.a,{children:Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsxs)(W.a,{item:!0,lg:6,children:[Object(U.jsx)(me,{disabled:!0,name:"Factories",label:"Default Factory",helptext:"Name of default Factory",items:e.adminSettings.Factories,onPropertyChange:e.onSelectChange}),Object(U.jsx)(fe,{name:"AllowClaimingOutOfFactoryWork",label:"Allow claiming on Out of Factory work",checked:e.adminSettings.AllowClaimingOutOfFactoryWork,onPropertyChange:e.onPropertyChange}),Object(U.jsx)(ge,{name:"IncrementPercentage",label:"Increment",helptext:"Percentage (%) increment",type:"number",onPropertyChange:e.onPropertyChange,value:e.adminSettings.IncrementPercentage}),Object(U.jsx)(me,{name:"ShowingCode",label:"Show Quote Number",helptext:"Show V6 Quote Number/ESP Code on Job",items:e.adminSettings.ShowingCode,onPropertyChange:e.onSelectChange}),Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"TrackLateLogin",label:"Track late login",checked:e.adminSettings.TrackLateLogin,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:9,children:Object(U.jsx)(ge,{name:"LateAllowance",label:"Late Login Min",helptext:"Number of minutes allowed for late login",type:"number",value:e.adminSettings.LateAllowance,onPropertyChange:e.onPropertyChange})})]})]}),Object(U.jsxs)(W.a,{item:!0,lg:6,children:[Object(U.jsxs)(ue.a,{fullWidth:!0,variant:"outlined",style:{marginBottom:20},children:["Select Groups for claim",Object(U.jsx)(Ie.a,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,name:"Groups",value:e.adminSettings.Groups.filter((function(e){return e.Selected})).map((function(e){return e.Text})),onChange:function(t){return e.onGroupsSelectChange(t)},input:Object(U.jsx)(we.a,{label:"Tag"}),renderValue:function(e){return e.join(", ")},MenuProps:Le,children:e.adminSettings.Groups.map((function(e){return Object(U.jsxs)(ke.a,{value:e.Text,children:[Object(U.jsx)(Pe.a,{checked:e.Selected}),Object(U.jsx)(Te.a,{primary:e.Text})]},e.Text)}))})]}),Object(U.jsx)(me,{name:"JobListOrdering",label:"Job List Order",helptext:"Order Showed in Job List Page",items:e.adminSettings.JobListOrdering,onPropertyChange:e.onSelectChange}),Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"TrackEarlyLeave",label:"Track early leave",checked:e.adminSettings.TrackEarlyLeave,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:9,children:Object(U.jsx)(ge,{name:"EarlyLeaveAllowance",label:"Early Leave Min",helptext:"Number of minutes allowed for early leave",type:"number",value:e.adminSettings.EarlyLeaveAllowance,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:12,children:Object(U.jsx)(fe,{name:"ShowStandardTime",label:"Show Standard Time",checked:e.adminSettings.ShowStandardTime,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:12,children:Object(U.jsx)(ge,{name:"NoClaimAllowance",label:"No Claim Allowance",helptext:"Seconds No Claim Allowance Before Logout. (Zero= disable)",type:"number",value:e.adminSettings.NoClaimAllowance,onPropertyChange:e.onPropertyChange})})]})]}),Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:4,children:Object(U.jsx)(fe,{name:"HidePreProductionJobs",label:"Hide PreProduction Jobs",checked:e.adminSettings.HidePreProductionJobs,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,children:Object(U.jsx)(fe,{name:"DividJobs",label:"Enable Dividing jobs",checked:e.adminSettings.DividJobs,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,children:Object(U.jsx)(fe,{name:"TrackNotLoggedOut",label:"Alert not logged out worker",checked:e.adminSettings.TrackNotLoggedOut,onPropertyChange:e.onPropertyChange})})]})]})})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(ce.a,{children:[Object(U.jsx)(ye.a,{title:"Production Board",subheader:"Production Board Section Settings",avatar:Object(U.jsxs)(ve.a,{"aria-label":"recipe",style:{backgroundColor:"blue"},children:[" ","P"," "]})}),Object(U.jsx)(le.a,{children:Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsxs)(W.a,{item:!0,lg:8,children:[Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:4,children:Object(U.jsx)(fe,{name:"PBShowProductionBoard",label:"Enable Production Board",checked:e.adminSettings.PBShowProductionBoard,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,children:Object(U.jsx)(fe,{name:"PBHideOutOfFactoryWorkTypes",label:"Hide Out of Factory WorkTypes",checked:e.adminSettings.PBHideOutOfFactoryWorkTypes,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,children:Object(U.jsx)(fe,{name:"ClaimOnPB",label:"Claim on Production Board",checked:e.adminSettings.ClaimOnPB,onPropertyChange:e.onPropertyChange})})]}),Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:12,children:Object(U.jsx)("label",{children:"Extra Columns"})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"PBTitleColumn",label:"Title",checked:e.adminSettings.PBTitleColumn,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"PBCustomerColumn",label:"Customer",checked:e.adminSettings.PBCustomerColumn,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"PBHourColumn",label:"Hours",checked:e.adminSettings.PBHourColumn,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"PBDueDateColumn",label:"Due Date",checked:e.adminSettings.PBDueDateColumn,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"ShowRework",label:"Show Rework",checked:e.adminSettings.ShowRework,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"ShowColour",label:"Show Colour",checked:e.adminSettings.ShowColour,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"ShowQty",label:"Show Unit Qty",checked:e.adminSettings.ShowQty,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"ShowSalesPerson",label:"Show SalesPerson",checked:e.adminSettings.ShowSalesPerson,onPropertyChange:e.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(fe,{name:"ShowEstimator",label:"Show Estimator",checked:e.adminSettings.ShowEstimator,onPropertyChange:e.onPropertyChange})})]})]}),Object(U.jsx)(W.a,{item:!0,lg:3,children:Object(U.jsx)(me,{name:"PBJobOrders",label:"Job Order",helptext:"Listing Job Order",items:e.adminSettings.PBJobOrders,onPropertyChange:e.onSelectChange})}),Object(U.jsx)(W.a,{item:!0,lg:1,children:Object(U.jsx)(fe,{name:"Z2A",label:"Z to A",checked:e.adminSettings.Z2A,onPropertyChange:e.onPropertyChange})})]})})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(ce.a,{children:[Object(U.jsx)(ye.a,{title:"Performance Statistics",subheader:"Performance Statistics Section Settings",avatar:Object(U.jsxs)(ve.a,{"aria-label":"recipe",style:{backgroundColor:"blue"},children:[" ","S"," "]})}),Object(U.jsx)(le.a,{children:Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsxs)(W.a,{item:!0,lg:6,children:[Object(U.jsx)(fe,{name:"PSShowPerformanceStates",label:"Enable Performance Stats",checked:e.adminSettings.PSShowPerformanceStates,onPropertyChange:e.onPropertyChange}),Object(U.jsx)(me,{name:"PSStatisticChart",label:"Statistic Chart Type",helptext:"",items:e.adminSettings.PSStatisticChart,onPropertyChange:e.onSelectChange})]}),Object(U.jsxs)(W.a,{item:!0,lg:6,children:[Object(U.jsx)(fe,{name:"PSEnableIndividual",label:"Enable Individual Performance Stats",checked:e.adminSettings.PSEnableIndividual,onPropertyChange:e.onPropertyChange}),Object(U.jsx)(me,{name:"PSStatisticGroup",label:"Statistic Group",helptext:"",items:e.adminSettings.PSStatisticGroup,onPropertyChange:e.onSelectChange})]}),Object(U.jsx)(W.a,{item:!0,lg:5,children:Object(U.jsx)(me,{name:"PSPerformanceChart",label:"Performance Chart Duration",helptext:"",items:e.adminSettings.PSPerformanceChart,onPropertyChange:e.onSelectChange})}),Object(U.jsx)(W.a,{item:!0,lg:5}),Object(U.jsx)(W.a,{item:!0,lg:2,mx:"auto",children:Object(U.jsx)(L.a,{variant:"contained",color:"primary",className:t.saveBtn,size:"medium",onClick:e.onSave,startIcon:Object(U.jsx)(Ce.a,{}),children:"Save"})})]})})]})]})},Je=n(56),Be=n.n(Je),Ne=new(function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getLocalToken=function(){return(new ee.a).get("_claim").user_t},e.setAsyncApiToken=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a){var r,s,i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={grant_type:"password",username:t,password:n,withCredentials:!0},s=Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"),i={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"*"},e.next=5,Be.a.post("".concat(a,"token"),s,i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),e.apiPost=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a,r){var s;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return{},Be.a.defaults.headers.post.Authorization="bearer "+e.getLocalToken(),Be.a.defaults.headers.post["Content-Type"]="application/json; charset=UTF-8",Be.a.defaults.headers.post.Accept="application/json",s={Authorization:"bearer "+e.getLocalToken(),"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"},t.next=7,Be.a.post("".concat(n),a,s);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),e.apiGet=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Be.a.defaults.headers.post.Authorization="bearer "+e.getLocalToken(),Be.a.defaults.headers.post["Content-type"]="application/json",t.next=5,Be.a.get(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Error in calling ESP (".concat(a,") API- ").concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),e.timeConvert=function(e){var t=e/60,n=Math.floor(t).toString(),a=60*(t-n),r=Math.round(a).toString();return(1==n.length?"0"+n:n)+":"+(1==r.length?"0"+r:r)},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(U.jsx)("din",{})}}]),n}(r.a.Component)),Re=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handelPropertyChange=function(t){var n=e.state.adminSettings,a="";a=void 0!==t.target.type&&"checkbox"===t.target.type?t.target.checked:t.target.value;var r=e.state.changes;r.push({name:t.target.name,value:a}),n[t.target.name]=a,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{changes:r,adSettings:n}))},e.onGroupsSelectChange=function(t){var n=e.state.adminSettings,a=t.target.value,r=[];n.Groups.map((function(e){a.includes(e.Text)?r.push({Value:e.Value,Text:e.Text,Disabled:!1,Group:null,Selected:!0}):r.push({Value:e.Value,Text:e.Text,Disabled:!1,Group:null,Selected:!1})})),n[t.target.name]=r,n.GroupsIds=r.filter((function(e){return e.Selected})).map((function(e){return e.Value})).join(","),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{adminSettings:n}))},e.onSelectChange=function(t){var n=e.state.adminSettings,a=t.target.value,r=[];n[t.target.name].map((function(e){e.Value===a?r.push({Value:e.Value,Text:e.Text,Disabled:!1,Group:null,Selected:!0}):r.push({Value:e.Value,Text:e.Text,Disabled:!1,Group:null,Selected:!1})}));var s=e.state.changes;s.push({name:t.target.name,value:a}),"Factories"===t.target.name&&e.getGroupsByAPI(a,e.props.apiRoute),n[t.target.name]=r,n[t.target.name+"Id"]=a,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{changes:s,adminSettings:n}))},e.captureIPAddress=Object(oe.a)(ie.a.mark((function t(){return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("https://api.ipify.org?format=jsonp?callback=?",{method:"GET",headers:{}}).then((function(e){return e.text()})).then((function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{ip:t}))}));case 1:case"end":return t.stop()}}),t)}))),e.getGroupsByAPI=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){var r,s;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},s=e.state.adminSettings;try{Ne.apiPost("".concat(a,"adminSettings/GetGroup?oid=")+n,{},"").then((function(t){r=JSON.parse(t.data),s.Groups=r,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{adminSettings:s}))})).catch((function(e){alert("Error in get Groups data")}))}catch(i){i.response?alert("Error in calling ESP API- ".concat(i.response.data)):alert("Error in calling ESP API- ".concat(i)),window.location.href="."}case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.getAdminSettingsByAPI=Object(oe.a)(ie.a.mark((function t(){var n,a;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.prev=1,t.next=4,Ne.apiPost("".concat(e.props.apiRoute,"adminSettings/GetInfo"),{},"");case 4:a=t.sent,n=JSON.parse(a.data),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{adminSettings:n}),(function(){e.props.onChangeSettings(n)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response?alert("Error in calling ESP API- ".concat(t.t0.response.data)):alert("Error in calling ESP API- ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.saveAdminSettingsByAPI=Object(oe.a)(ie.a.mark((function t(){var n;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.adminSettings;try{Ne.apiPost("".concat(e.props.apiRoute,"adminSettings/PostData"),n,"").then((function(t){e.props.history.push("".concat(e.props.mainRoute)),e.getAdminSettingsByAPI(),window.location.reload(!0),window.location.href="".concat(e.props.mainRoute)})).catch((function(e){alert("Error in get Groups data")}))}catch(a){a.response?alert("Error in calling ESP API- ".concat(a.response.data)):alert("Error in calling ESP API- ".concat(a))}case 2:case"end":return t.stop()}}),t)}))),e.state={adminSettings:{},user:{},changes:[]},e}return Object(d.a)(n,[{key:"componentWillMount",value:function(){this.getAdminSettingsByAPI(),this.captureIPAddress(),this.props.changeStep(0)}},{key:"render",value:function(e){return Object(U.jsx)(Ae,{adminSettings:this.state.adminSettings||null,onPropertyChange:this.handelPropertyChange,onSelectChange:this.onSelectChange,onGroupsSelectChange:this.onGroupsSelectChange,onSave:this.saveAdminSettingsByAPI})}}]),n}(r.a.Component),We=n(425),Ee=n(154),ze=n(18),De=n(562),Fe=Object(ze.a)((function(e){return Object(U.jsx)(De.a,Object(c.a)({focusVisibleClassName:".Mui-focusVisible",disableRipple:!0},e))}))((function(e){var t=e.theme;return{width:45,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,color:"#fff",transitionDuration:"700ms","&.Mui-checked":{transform:"translateX(20px)",color:"#3f51b5","& + .MuiSwitch-track":{backgroundColor:(t.palette.mode,"#9abf47"),color:"#000",opacity:.8,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.9}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#fff",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:"light"===t.palette.mode?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:"light"===t.palette.mode?"#c5c6c9":"#000",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}}}));function Me(e){return Object(U.jsx)(Fe,Object(c.a)({},e))}var Ge=n(112),Ue=n.n(Ge),Ve=n(228),He=n.n(Ve),_e=n(10),Qe=n(526),Ye=n(149),Ze=n.n(Ye),qe=n(413),Ke=n(523),Xe=Object(B.a)((function(e){return{root:{width:"100%",maxWidth:"90%",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}));function $e(e){var t=Xe();return Object(U.jsx)(S.a,{className:t.root,children:e.items&&e.items.filter((function(e){return"Claim from ESP-Claim"!==e})).map((function(e){return Object(U.jsxs)(a.Fragment,{children:[Object(U.jsxs)(C.a,{alignItems:"flex-start",children:[Object(U.jsx)(Ke.a,{children:Object(U.jsxs)(ve.a,{"aria-label":"recipe",style:{backgroundColor:"blue"},children:[" ","C"," "]})}),Object(U.jsx)(P.a,{primary:"Author:".concat(e.Author," ").concat(null!=e.Resource&&e.Resource.length>0?"Resource:".concat(e.Resource):""," "),secondary:Object(U.jsxs)(r.a.Fragment,{children:[Object(U.jsx)(G.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary",children:e.Date}),Object(U.jsx)("br",{}),e.IsBold?Object(U.jsx)("b",{children:Object(U.jsx)("span",{style:{fontSize:"15px",fontWeight:"1000",color:"black"},children:e.Comment})}):Object(U.jsx)("span",{style:{fontSize:"15px"},children:e.Comment})]})})]},e.Resource),Object(U.jsx)(g.a,{variant:"inset",component:"li"})]})}))})}var et=n(528),tt=n(530),nt=n(524),at=n(527),rt=n(529),st=n(525),it=Object(B.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),ot=r.a.forwardRef((function(e,t){return Object(U.jsx)(qe.a,Object(c.a)({direction:"up",ref:t},e))}));function ct(e){var t=it(),n=Object(_e.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(nt.a),a=Object(_e.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(st.a),r=function(){e.handleClose(!1)};return Object(U.jsx)("div",{children:Object(U.jsxs)(Qe.a,{fullScreen:!0,open:e.open,onClose:r,TransitionComponent:ot,children:[Object(U.jsx)(m.a,{className:t.appBar,children:Object(U.jsxs)(T.a,{children:[Object(U.jsx)(f.a,{edge:"start",color:"inherit",onClick:r,"aria-label":"close",children:Object(U.jsx)(Ze.a,{})}),Object(U.jsx)(G.a,{variant:"h6",className:t.title,children:e.header})]})}),Object(U.jsx)("p",{children:e.text}),e.uls&&Object(U.jsx)($e,{items:e.uls}),e.textList&&e.textList.length>0&&Object(U.jsx)(at.a,{component:M.a,lg:6,sm:12,xs:12,children:Object(U.jsxs)(et.a,{className:t.table,"aria-label":"customized table",children:[Object(U.jsx)(rt.a,{children:Object(U.jsx)(st.a,{})}),Object(U.jsx)(tt.a,{children:e.textList.map((function(e){return Object(U.jsxs)(a,{hover:!0,children:[Object(U.jsx)(n,{component:"th",scope:"row",children:e.Date}),Object(U.jsx)(n,{align:"left",children:e.Name}),Object(U.jsx)(n,{align:"left",children:e.Std}),Object(U.jsx)(n,{align:"left",children:e.Phy})]},e.Date)}))})]})})]})})}var lt=n(53),dt=n(532),jt=n(100),bt=n.n(jt),ut=n(271),ht=n(531);function mt(e){return Object(U.jsx)("img",{src:"".concat(e.mainRoute,"loading.gif"),alt:"LOADING...",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}var pt=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)([]),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(a.useState)(""),b=Object(u.a)(j,2),h=b[0],m=b[1],p=Object(a.useState)(e.jobs),g=Object(u.a)(p,2),O=g[0],y=g[1],v=Object(a.useState)(!0),S=Object(u.a)(v,2),C=S[0],k=S[1],P=Object(a.useState)(!1),I=Object(u.a)(P,2),w=I[0],T=I[1],A=Object(ut.a)({overrides:{MuiTooltip:{tooltip:{fontSize:"0.7em",color:"yellow",backgroundColor:"#eeeeee"}}}}),J={fontSize:"1.8em",fontFamily:"sans-serif"};function B(e,t){for(var n=function(e,t){var n=0,a=e.length,r=[],s=[];for(n=0;n<a;n+=t)s=e.slice(n,n+t),r.push(s);return r}(t,4),a=[],r=[],s=[],i={},o=0;o<n.length;o++){var l=n[o];r=[];for(var d=0;d<l.length;d++)r.push(Object(U.jsx)("td",{children:l[d].Name}));s.push(Object(U.jsx)("tr",{children:r})),r=[];for(d=0;d<l.length;d++)100==l[d].Progress&&(i=Object(U.jsx)(He.a,{})),i=0==l[d].Progress?Object(U.jsx)("dir",{}):Object(U.jsx)(ht.a,{theme:A,children:Object(U.jsx)(dt.a,{title:l[d].ChartObj.filter((function(e){return e.value>0})).map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{style:{backgroundColor:e.color},children:" "}),Object(U.jsx)("td",{children:Object(U.jsxs)("h1",{children:[" ",e.value]})})]})})),placement:"top",children:w?Object(U.jsx)(Ee.PieChart,{data:l[d].ChartObj.filter((function(e){return e.value>0})),radius:Ee.PieChart.defaultProps.radius-10,segmentsShift:function(e){return 0===e?10:.5},label:function(e){return e.dataEntry.value},labelStyle:Object(c.a)({},J)}):Object(U.jsx)("table",{style:{padding:0,margin:0,width:"100%",height:"100%"},children:Object(U.jsx)("tr",{children:l[d].ChartObj.filter((function(e){return e.value>0})).map((function(e){return Object(U.jsx)("td",{style:{width:e.value,backgroundColor:e.color,fontSize:"0.8em"},children:e.value})}))})})})}),r.push(Object(U.jsx)("td",{children:i})),i={};s.push(Object(U.jsx)("tr",{children:r})),r=[]}return a.push(Object(U.jsx)("table",{children:s})),a}return Object(U.jsx)(a.Fragment,{children:Object(U.jsxs)("div",{style:{width:"99%"},children:[Object(U.jsxs)(W.a,{container:!0,spacing:5,children:[Object(U.jsxs)(x.a,{only:["xs"],children:[Object(U.jsx)(W.a,{item:!0,lg:2,sm:6,children:Object(U.jsx)("h1",{children:"Production\xa0Board"})}),Object(U.jsxs)(W.a,{item:!0,lg:1,sm:6,children:[Object(U.jsx)(We.a,{htmlFor:"input-with-icon-adornment",children:"Bar/Pie"}),Object(U.jsx)(Me,{onChange:function(e){T(e.target.checked)}})]}),Object(U.jsx)(W.a,{item:!0,lg:4,sm:6,children:Object(U.jsx)("table",{style:{width:"100%"},children:Object(U.jsxs)("tbody",{children:[Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#00C400",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Finished"}),Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#ffa500",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"High Priority"}),Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#808080",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Out Of Factory"})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#ffff00",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Scheduled"}),Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#d3d3d3",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Non-scheduled"})]})]})})})]}),Object(U.jsxs)(W.a,{item:!0,lg:2,sm:6,xs:6,children:[Object(U.jsx)(f.a,{sx:{p:"10px"},"aria-label":"menu",children:Object(U.jsx)(Ue.a,{})}),Object(U.jsx)(lt.c,{sx:{ml:1,flex:1},placeholder:"Search",variant:"outlined",value:h,onChange:function(t){var n=t.target.value;m(n);var a=t.target.value.length>0?e.jobs.filter((function(e){return e.Title.toLowerCase().includes(n.toLowerCase())||e.Code.includes(n)||e.Customer.includes(n)})):e.jobs;y(a)}}),Object(U.jsx)(f.a,{color:"primary",sx:{p:"10px"},"aria-label":"directions",onClick:function(){return m(""),y([]),void y(e.jobs)},children:Object(U.jsx)(bt.a,{})})]}),Object(U.jsx)(W.a,{item:!0,xs:6,lg:2,md:4,children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",onClick:function(){return e.logoutFromPB()},startIcon:Object(U.jsx)(Z.a,{}),children:"Logout"})}),Object(U.jsxs)(x.a,{only:["lg","xl","md"],children:[Object(U.jsxs)(W.a,{item:!0,xs:4,children:[Object(U.jsx)(We.a,{htmlFor:"input-with-icon-adornment",children:"Show W/T"}),Object(U.jsx)(Me,{checked:C,onChange:function(e){k(e.target.checked)}})]}),Object(U.jsxs)(W.a,{item:!0,xs:4,children:[Object(U.jsx)(We.a,{htmlFor:"input-with-icon-adornment",children:"Pie/Bar"}),Object(U.jsx)(Me,{onChange:function(e){T(e.target.checked)}})]}),Object(U.jsx)(W.a,{item:!0,xs:12,children:Object(U.jsx)("table",{style:{width:"100%"},children:Object(U.jsxs)("tbody",{children:[Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#00C400",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Finished"}),Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#ffa500",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"High Priority"}),Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#808080",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Out Of Factory"})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#ffff00",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Scheduled"}),Object(U.jsx)("td",{style:{width:"10%"},children:Object(U.jsx)("div",{style:{backgroundColor:"#d3d3d3",float:"left",width:"100%",height:"100%"},children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0"})})}),Object(U.jsx)("td",{children:"Non-scheduled"})]})]})})})]})]}),Object(U.jsx)(x.a,{only:["xs"],children:Object(U.jsxs)("table",{id:"pbDesktop",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{xs:2,children:"Code"}),e.settings.PBCustomerColumn&&Object(U.jsx)("th",{children:"Customer"}),e.settings.PBTitleColumn&&Object(U.jsx)("th",{children:"Title"}),e.settings.PBHourColumn&&Object(U.jsx)("th",{children:"Hours"}),e.settings.PBDueDateColumn&&Object(U.jsx)("th",{children:"Due Date"}),e.settings.ShowQty&&Object(U.jsx)("th",{children:"Unit Qty"}),e.settings.ShowSalesPerson&&Object(U.jsx)("th",{children:"SalesPerson"}),e.settings.ShowEstimator&&Object(U.jsx)("th",{children:"Estimator"}),e.settings.ShowColour&&Object(U.jsx)("th",{children:"Colour"}),Object(U.jsx)("th",{children:"Prog."}),O&&O[0]&&O[0].WorkTypes&&O[0].WorkTypes.map((function(e){return Object(U.jsx)("th",{style:{minWidth:"65px"},children:e.Name})}))]})}),Object(U.jsx)("tbody",{children:O&&O.map((function(t,n){return Object(U.jsxs)("tr",{style:{backgroundColor:"".concat(n%2==0?"#fff":"#fafafa")},className:"border-bottom",children:[Object(U.jsxs)("td",{children:[t.Comments.length>0&&Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{textAlign:"right",color:"#196dc4"},onClick:function(e){d(t.Comments),s(!0)},children:Object(U.jsxs)("span",{style:{textDecoration:"underline"},children:[" ",t.Code]})}),0==t.Comments.length&&t.Code]}),e.settings.PBCustomerColumn&&Object(U.jsx)("td",{children:t.Customer}),e.settings.PBTitleColumn&&Object(U.jsx)("td",{className:"border-bottom",style:{backgroundColor:"".concat(""!==t.TitleBackgroundColor?t.TitleBackgroundColor:n%2==0?"#fff":"#fafafa"),color:"".concat(t.TitleColor)},children:t.Title}),e.settings.PBHourColumn&&Object(U.jsx)("td",{children:t.Hours}),e.settings.PBDueDateColumn&&Object(U.jsx)("td",{children:t.Due}),e.settings.ShowQty&&Object(U.jsx)("td",{children:t.UnitQty}),e.settings.ShowSalesPerson&&Object(U.jsx)("td",{children:t.SalesPerson}),e.settings.ShowEstimator&&Object(U.jsx)("td",{children:t.Estimator}),e.settings.ShowColour&&Object(U.jsx)("td",{children:t.Colour}),Object(U.jsxs)("td",{children:[t.Progress,"%"]}),t.WorkTypes&&t.WorkTypes.map((function(n){return 100==n.Progress?Object(U.jsx)("td",{style:{margin:0,padding:0,verticalAlign:"middle"},children:Object(U.jsx)(He.a,{})}):0==n.Progress?Object(U.jsx)("td",{style:{margin:0,padding:0,verticalAlign:"middle"},onClick:function(a){return e.settings.ClaimOnPB&&-1!=n.Progress&&e.claimOnPB(t.Oid,n.Oid,n.JobLevel,t.Code)},children:"0%"}):Object(U.jsx)(ht.a,{theme:A,children:Object(U.jsx)(dt.a,{title:n.ChartObj.filter((function(e){return e.value>0})).map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{style:{backgroundColor:e.color},children:" "}),Object(U.jsx)("td",{children:Object(U.jsxs)("h1",{children:[" ",e.value]})})]})})),placement:"top",children:Object(U.jsxs)("td",{style:{paddingRight:"5px",paddingLeft:"2px",verticalAlign:"middle"},onClick:function(a){return e.settings.ClaimOnPB&&-1!=n.Progress&&e.claimOnPB(t.Oid,n.Oid,n.JobLevel,t.Code)},children:[w&&Object(U.jsx)(Ee.PieChart,{style:{margin:0,padding:0,marginLeft:"10px",fontSize:"1.2em"},data:n.ChartObj.filter((function(e){return e.value>0})),radius:Ee.PieChart.defaultProps.radius-10,segmentsShift:function(e){return 0===e?10:.5},label:function(e){return e.dataEntry.value},labelStyle:Object(c.a)({},J)}),!w&&Object(U.jsx)("table",{style:{padding:0,margin:0,width:"100%",height:"100%"},children:Object(U.jsx)("tr",{children:n.ChartObj.filter((function(e){return e.value>0})).map((function(e){return Object(U.jsx)("td",{style:{width:e.value,marginLeft:"3px",marginRight:"3px",backgroundColor:e.color,fontSize:"1.2em"},children:e.value})}))})})]})})})}))]})}))})]})}),Object(U.jsx)(x.a,{only:["lg","xl","md"],children:Object(U.jsx)("table",{style:{border:"none!important",backgroundColor:"white"},children:O&&O.map((function(t,n){return Object(U.jsxs)(a.Fragment,{children:[Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:"4",children:Object(U.jsx)("hr",{})})}),Object(U.jsxs)("tr",{children:[Object(U.jsxs)("td",{colSpan:"2",children:[t.Comments.length>0&&Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{textAlign:"right"},onClick:function(e){d(t.Comments),s(!0)},children:t.Code}),0==t.Comments.length&&t.Code]}),Object(U.jsxs)("td",{colSpan:"1",children:[t.Progress,"%"]})]}),Object(U.jsx)("tr",{children:e.settings.PBCustomerColumn&&Object(U.jsx)("td",{colSpan:"4",children:t.Customer})}),e.settings.PBTitleColumn&&Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:"4",style:{backgroundColor:"".concat(""!==t.TitleBackgroundColor?t.TitleBackgroundColor:n%2==0?"#fff":"#fafafa"),color:"".concat(t.TitleColor)},children:t.Title})}),e.settings.PBDueDateColumn&&Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{colSpan:"1",children:"Due:"}),Object(U.jsx)("td",{colSpan:"3",children:t.Due})]}),e.settings.PBHourColumn&&Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{colSpan:"1",children:"Hours:"}),Object(U.jsx)("td",{colSpan:"3",children:t.Hours})]}),Object(U.jsx)("tr",{children:t.WorkTypes&&C&&Object(U.jsx)("td",{onClick:function(n){return e.settings.ClaimOnPB&&e.claimOnPB(t.Oid,C.Oid,C.JobLevel,t.Code)},colSpan:"4",children:B(t.Code,t.WorkTypes)})}),Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:"4",children:Object(U.jsx)("hr",{})})})]})}))})}),Object(U.jsx)(ct,{header:"Job Notes",uls:l,open:r,handleClose:function(){return s(!1)}})]})})},gt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).getProductionBoardInfoByAPI=Object(oe.a)(ie.a.mark((function t(){var n;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={};try{Ne.apiPost("".concat(e.props.apiRoute,"ProductionBoard/GetProductionBoardInfo"),{},"").then((function(t){n=JSON.parse(t.data),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobs:n}),(function(){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loaded:!0}))}))})).catch((function(e){alert("Error in get production board data")}))}catch(a){a.response?alert("Error in calling ESP API (production board)- ".concat(a.response.data)):alert("Error in calling ESP API (production board)- ".concat(a)),window.location.href="."}case 2:case"end":return t.stop()}}),t)}))),e.claimOnPB=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a,r,s){return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.claimOnPB(n,a,r,s);case 1:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),e.logoutFromPB=function(){e.props.logoutFromPB()},e.state={jobs:[],loaded:!1},e}return Object(d.a)(n,[{key:"componentWillMount",value:function(){this.getProductionBoardInfoByAPI()}},{key:"render",value:function(e){return Object(U.jsxs)(a.Fragment,{children:[!this.state.loaded&&Object(U.jsx)(mt,{mainRoute:this.props.mainRoute}),this.state.loaded&&Object(U.jsx)(pt,{jobs:this.state.jobs,settings:this.props.settings,claimOnPB:this.claimOnPB,logoutFromPB:this.props.logoutFromPB})]})}}]),n}(r.a.Component),Ot=n(44),xt=n(546),ft=n(27),yt=Object(B.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary},search:Object(h.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ft.b)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(ft.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(h.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),bolding:{fontSize:"0.9rem","&:hover":{cursor:"pointer",zIndex:"1000"}},boxBolding:{"&:hover":{boxSizing:"border-box",boxShadow:"3px 3px #eee",borderBottom:"2px  solid #5584c0",borderRight:"2px  solid #5584c0",marginLeft:"-2px",marginTop:"-2px"}}}})),vt=n(416),St=n(533),Ct=n(77),kt=n.n(Ct),Pt=n(555);function It(e){var t=yt(),n=Object(a.useState)(e.logoutChecked),r=Object(u.a)(n,2),s=r[0],i=(r[1],Object(ae.f)()),o=e.loggingOut?e.items.filter((function(e){return e.IsLoggedIn})):e.items;function c(e){var t=e.Name+(e.IsOnLeave?"(on leave)":"");return null!=e.LastClaimTime?Object(U.jsx)(Pt.a,{title:"Your last claim/ login was ".concat(e.LastClaimTime," ago"),children:Object(U.jsxs)("span",{children:[t," ",Object(U.jsxs)("span",{style:{fontSize:"small"},children:[Object(U.jsx)("br",{}),"\xa0\xa0(",e.LastClaimTime,")"]})]})}):Object(U.jsx)("div",{children:t})}return Object(a.useEffect)((function(){window.scrollTo(0,0),setTimeout((function(){e.goBackToStart(0)}),6e4)})),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:t.search,children:Object(U.jsxs)(W.a,{container:!0,spacing:1,style:{backgroundColor:"#ebedf1"},children:[(e.loggingOut||e.fromPB)&&Object(U.jsx)(W.a,{item:!0,lg:1,sm:1,xs:6,style:{fontSize:"24px",paddingTop:"30px"},children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{textAlign:"right"},onClick:function(){i.push({pathname:"".concat(e.mainRoute,"productionBoard")})},startIcon:Object(U.jsx)(kt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:4,sm:4,xs:6,style:{fontSize:"24px",paddingTop:"30px"},children:Object(U.jsx)("span",{style:{fontSize:"24px",padding:"30px",marginTop:"30px"},children:Object(U.jsx)("b",{children:" Login"})})}),Object(U.jsx)(W.a,{item:!0,lg:3,sm:3,xs:6,style:{marginTop:"20px",alignContent:"right"}}),Object(U.jsxs)(W.a,{item:!0,lg:4,sm:4,xs:12,style:{marginTop:"20px",alignContent:"right"},children:[Object(U.jsx)(We.a,{htmlFor:"input-with-icon-adornment",children:"Search"}),Object(U.jsx)(vt.a,{id:"input-with-icon-adornment",startAdornment:Object(U.jsx)(St.a,{position:"start",children:Object(U.jsx)(Ue.a,{})}),onChange:e.searchNames})]})]})}),Object(U.jsx)(W.a,{container:!0,spacing:0,style:{marginTop:10,backgroundColor:"#ebedf1"},children:o&&o.map((function(n){return Object(U.jsx)(W.a,{item:!0,lg:2,sm:6,xs:12,style:{padding:"15px"},className:t.bolding,children:Object(U.jsx)(xt.a,{borderRadius:"5%",p:2,className:t.boxBolding,boxShadow:2,color:"black",bgcolor:n.IsOnLeave?"#b4bebf":n.IsLoggedIn?"#9abf47":"white",style:{width:"100%",height:"100%",fontSize:"1.2rem",textAlign:"center"},onClick:function(){e.handleLogin(n.OId,n.IsOnLeave,s)},children:c(n)},n.OId)},n.OId)}))})]})}var wt=n(281),Tt=n(119),Lt=n.n(Tt),At=n(534);function Jt(e){return Object(U.jsxs)(xt.a,{position:"relative",display:"inline-flex",children:[Object(U.jsx)(At.a,Object(c.a)({variant:"determinate"},e)),Object(U.jsx)(xt.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(U.jsx)(G.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Bt(e){var t=r.a.useState(e.value),n=Object(u.a)(t,1)[0];return Object(U.jsx)(Jt,{value:n})}var Nt=new(function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getJobItemsFromApi=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a,r){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{},e.prev=1,e.next=4,Ne.apiPost("".concat(r,"Claim/GetJobItems"),{jobId:t,WorkTypeId:n,workerId:a},"");case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),e.t0.response?alert("Error in calling ESP (Claim / Get Job items) API- ".concat(e.t0.response.data)):alert("Error in calling ESP (Claim / Get Job items) API- ".concat(e.t0.message)),window.location.href=".";case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),e.getJobsOfWorkerFromApi=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a){var r,s,i=arguments;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>3&&void 0!==i[3]&&i[3],s={id:n,jobStage:a},e.next=4,Ne.apiPost("".concat(t,"Claim/GetJobsOfWorker?id=").concat(n,"&jobStage=").concat(a,"&siteWork=").concat(r),s,"");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),e.submitClaimInAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a,r,s,i,o){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={workerId:t,jobId:n,jobItems:a,groupPercent:r,comment:s,logout:i},e.next=3,Ne.apiPost("".concat(o,"Claim/PostSubmitClaim"),c,"Submit Claim Job");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s,i,o){return e.apply(this,arguments)}}(),e.submitFullJobClaimInAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a,r){var s;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={workerId:t,jobId:n,comment:a},e.next=3,Ne.apiPost("".concat(r,"Claim/PostClaimWholeJob"),s,"Submit Claim Full Job");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),e.submitAdminJobClaimInAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a,r,s){var i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={workerId:t,WorkTypeId:n,comment:a,logout:r},e.next=3,Ne.apiPost("".concat(s,"Claim/PostSubmitClaimAdminTask"),i,"Submit Admin Job");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s){return e.apply(this,arguments)}}(),e.GetClaimedByAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={jobCode:t,worktypId:n},e.abrupt("return",Ne.apiPost("".concat(a,"Claim/GetWorkTypeClaimedBy?jobCode=").concat(t,"&worktypeId=").concat(n),r,"Get Work Type Claimed by"));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),e.GetPerfStatByAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a,r){var s;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:t,from:n,to:a},e.abrupt("return",Ne.apiPost("".concat(r,"PerformanceStat/GetWorkerPS?id=").concat(t,"&from=").concat(n,"&to=").concat(a),s,"Get performance stat"));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(U.jsx)("din",{})}}]),n}(r.a.Component));function Rt(e){var t=yt();Object(a.useEffect)((function(){window.scrollTo(0,0)}));var n=Object(a.useState)([]),r=Object(u.a)(n,2),s=r[0],i=r[1],o=Object(a.useState)(!1),c=Object(u.a)(o,2),l=c[0],d=c[1],j=Object(a.useState)(e.workTypes),b=Object(u.a)(j,2),h=b[0],m=b[1],p=Object(a.useState)(""),g=Object(u.a)(p,2),O=g[0],y=g[1];function v(e,t,n){Nt.GetClaimedByAPI(t,e,n).then((function(e){i(JSON.parse(e.data)),d(!0)}))}return Object(U.jsx)(a.Fragment,{children:Object(U.jsxs)(ce.a,{style:{backgroundColor:"#fff"},children:[Object(U.jsxs)(le.a,{children:[Object(U.jsxs)(W.a,{container:!0,spacing:2,children:[Object(U.jsx)(W.a,{ml:0,item:!0,lg:1,sm:4,xs:4,children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{textAlign:"right"},onClick:function(){e.handleBack(1)},startIcon:Object(U.jsx)(kt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:7,sm:4,xs:4,children:Object(U.jsx)("span",{style:{fontSize:"22px",marginTop:"30px"},children:Object(U.jsxs)("b",{children:["Work\xa0Type"," ",e.menuIsOpen?"":" ("+e.claimingName+")"," "]})})}),Object(U.jsx)(x.a,{only:["xl","lg","md"],children:Object(U.jsx)(W.a,{ml:0,item:!0,lg:1,sm:4,xs:4,style:{textAlign:"right"}})}),Object(U.jsxs)(W.a,{item:!0,lg:3,sm:12,xs:12,children:[Object(U.jsx)(f.a,{sx:{p:"10px"},"aria-label":"menu",children:Object(U.jsx)(Ue.a,{})}),Object(U.jsx)(wt.a,{sx:{ml:1,flex:1},id:"worktypeSearchVal",placeholder:"Search",variant:"outlined",value:O,onChange:function(t){var n=t.target.value;y(n);var a=t.target.value.length>0?e.workTypes.filter((function(e){return e.Name.toLowerCase().includes(n.toLowerCase())})):e.workTypes;m(a)}}),Object(U.jsx)(f.a,{color:"primary",sx:{p:"10px"},"aria-label":"directions",onClick:function(){m([]),m(e.workTypes),y("")},children:Object(U.jsx)(bt.a,{})})]}),Object(U.jsx)(x.a,{only:["sm","xs"],children:Object(U.jsx)(W.a,{ml:0,item:!0,lg:1,sm:1,style:{textAlign:"right"}})})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("h2",{children:"Primary"}),Object(U.jsx)(W.a,{container:!0,spacing:1,children:h&&h.filter((function(t){return t.Progress<100&&e.primaryWorktypeIds.includes(t.OId)})).sort((function(e,t){return e.CategoryOrder-t.CategoryOrder})).map((function(n){return Object(U.jsx)(W.a,{item:!0,lg:2,sm:6,xs:12,className:t.bolding,children:Object(U.jsxs)(xt.a,{p:4,borderRadius:"5%",className:t.boxBolding,style:{width:"100%",height:"100%",fontSize:"0.9rem",textAlign:"center",backgroundColor:"production"==n.CategoryName?"#9abf47":"preproduction"==n.CategoryName?"#b3b31b":"postproduction"==n.CategoryName?"#adadad":"white"},onClick:function(){e.handleWorkTypeClick(n.OId)},clickable:!0,children:[n.Name,Object(U.jsx)("hr",{}),Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:6,sm:5,xs:5,children:Object(U.jsx)(f.a,{color:"inherit",children:Object(U.jsx)(Lt.a,{onClick:function(t){v(n.OId,e.jobCode,e.apiRoute),t.stopPropagation()}})})}),Object(U.jsx)(W.a,{item:!0,lg:6,sm:6,xs:6,children:Object(U.jsx)(Bt,{value:n.Progress})})]})]})},n.OId)}))}),Object(U.jsx)("h2",{children:"Secondary"}),Object(U.jsx)(W.a,{container:!0,spacing:1,children:h&&h.filter((function(t){return t.Progress<100&&e.secondaryWorktypeIds.includes(t.OId)})).sort((function(e,t){return e.CategoryOrder-t.CategoryOrder})).map((function(n){return Object(U.jsx)(W.a,{item:!0,lg:2,sm:6,xs:12,className:t.bolding,children:Object(U.jsxs)(xt.a,{p:4,borderRadius:"5%",className:t.boxBolding,style:{width:"100%",height:"100%",fontSize:"0.9rem",textAlign:"center",backgroundColor:"production"==n.CategoryName?"#9abf47":"preproduction"==n.CategoryName?"#b3b31b":"postproduction"==n.CategoryName?"#adadad":"white"},onClick:function(){e.handleWorkTypeClick(n.OId)},clickable:!0,children:[n.Name,Object(U.jsx)("hr",{}),Object(U.jsxs)(W.a,{container:!0,children:[Object(U.jsx)(W.a,{item:!0,lg:6,sm:5,xs:5,children:Object(U.jsx)(f.a,{color:"inherit",children:Object(U.jsx)(Lt.a,{onClick:function(t){v(n.OId,e.jobCode,e.apiRoute),t.stopPropagation()}})})}),Object(U.jsx)(W.a,{item:!0,lg:6,sm:6,xs:6,children:Object(U.jsx)(Bt,{value:n.Progress})})]})]})},n.OId)}))})]}),Object(U.jsx)(ct,{header:"Claimed By",textList:s,open:l,handleClose:function(){return d(!1)}})]})})}var Wt=n(559),Et=n(229),zt=n.n(Et),Dt=n(230),Ft=n.n(Dt),Mt=n(537),Gt=n(560),Ut=n(535),Vt=n(536),Ht=n(120),_t=n.n(Ht),Qt=Object(_e.a)({root:{color:"#196dc4",height:3,padding:"13px 0"},thumb:{height:27,width:27,backgroundColor:"#fff",border:"1px solid currentColor",marginTop:-12,marginLeft:-13,boxShadow:"#ebebeb 0 2px 2px","&:focus, &:hover, &$active":{boxShadow:"#eee 0 2px 3px 1px"},"& .bar":{height:9,width:1,backgroundColor:"currentColor",marginLeft:1,marginRight:1}},active:{},track:{height:3},valueLabel:{left:"calc(-50% + 8px)"},rail:{color:"#eee",opacity:1,height:3}})(Wt.a);function Yt(e){return Object(U.jsx)("span",Object(c.a)({},e))}var Zt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this)).mainJobItems=function(){return[]},a.checkChange=function(e){for(var t=0;t<e.length;t++)if(e[t].Progress100!==e[t].Main_Progress100)return!0;return!1},a.handleChange=function(e,t){var n=a.state.jobItems;e>=n[t].Main_Progress100&&e<=100&&(n[t].Progress100=parseInt(e));var r=a.checkChange(n);a.setState(Object(c.a)(Object(c.a)({},a.state),{},{jobItems:n,changed:r,groupPercent:a.groupSliderValue()}))},a.handleBtn=function(e,t){var n=a.state.jobItems;if(n[t].Progress100||(n[t].Progress100=0),n[t].Progress100+e>=n[t].Main_Progress100){n[t].Progress100+e>100?n[t].Progress100=100:n[t].Progress100=a.roundNumber(n[t].Progress100+e,n[t].Progress100);var r=a.checkChange(n);a.setState(Object(c.a)(Object(c.a)({},a.state),{},{jobItems:n,changed:r}))}},a.handleComplete=function(e){var t=a.state.jobItems;t[e].Progress100=100;var n=a.checkChange(t);a.setState(Object(c.a)(Object(c.a)({},a.state),{},{jobItems:t,changed:n}))},a.searchItems=function(e){var t=e.target.value,n=e.target.value.length>0?a.mainJobItems.filter((function(e){return e.Name.toLowerCase().includes(t)})):a.mainJobItems;a.setState(Object(c.a)(Object(c.a)({},a.state),{},{jobItems:n,searchVal:t}))},a.clearSearch=function(){a.setState([]),a.setState(Object(c.a)(Object(c.a)({},a.state),{},{jobItems:a.mainJobItems,searchVal:""}))},a.state={jobItems:e.items,changed:e.items.some((function(e){return e.Progress100!==e.Main_Progress100})),groupPercent:0,searchVal:""},a}return Object(d.a)(n,[{key:"componentWillMount",value:function(){this.setState({groupPercent:this.props.totalProgress}),this.mainJobItems=this.state.jobItems}},{key:"componentDidMount",value:function(){}},{key:"roundNumber",value:function(e,t){return e>t?e%this.props.settings.IncrementPercentage==0?e:Math.ceil((e-this.props.settings.IncrementPercentage-1)/this.props.settings.IncrementPercentage)*this.props.settings.IncrementPercentage:e%this.props.settings.IncrementPercentage==0?e:Math.floor((e+this.props.settings.IncrementPercentage-1)/this.props.settings.IncrementPercentage)*this.props.settings.IncrementPercentage}},{key:"handleGroupedChanged",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<0)return!1;if(e>100&&(e=100),e<this.props.totalProgress)return!1;var n=this.state.jobItems,a=(e=t?this.roundNumber(e,this.state.groupPercent):e)!=this.props.totalProgress;this.setState(Object(c.a)(Object(c.a)({},this.state),{},{jobItems:n,groupPercent:e,changed:a}))}},{key:"handleChanged",value:function(e){if(e>100||e<0)return!1;this.setState(Object(c.a)(Object(c.a)({},this.state),{},{groupPercent:e}))}},{key:"groupSliderValue",value:function(){return this.state.jobItems.length>0?Math.round(this.state.jobItems.map((function(e){return e.Progress100})).reduce((function(e,t){return e+t}))/this.state.jobItems.length):0}},{key:"render",value:function(){var e=this,t=(this.props.classes,this.state.jobItems.map((function(e){return e.StdTime})).reduce((function(e,t){return e+t}),0));function n(e){return"".concat(e,"%")}return Object(U.jsx)(a.Fragment,{children:Object(U.jsxs)(ce.a,{style:{backgroundColor:"#fff"},children:[Object(U.jsx)(le.a,{children:Object(U.jsx)(et.a,{"aria-label":"customized table",children:Object(U.jsxs)(tt.a,{children:[Object(U.jsx)(st.a,{children:Object(U.jsx)(nt.a,{colSpan:"2",children:Object(U.jsxs)(W.a,{container:!0,spacing:2,children:[Object(U.jsx)(W.a,{ml:0,item:!0,lg:1,sm:4,xs:3,children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{textAlign:"right"},onClick:function(){e.props.handleBack(2)},startIcon:Object(U.jsx)(kt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:7,sm:8,xs:8,children:Object(U.jsx)("span",{style:{fontSize:"24px",marginTop:"30px"},children:Object(U.jsxs)("b",{children:["Job\xa0Items"," ",this.props.menuIsOpen?"":" ("+this.props.claimingName+")"," "]})})}),Object(U.jsxs)(W.a,{item:!0,lg:3,sm:12,xs:12,children:[Object(U.jsx)(f.a,{sx:{p:"10px"},"aria-label":"menu",children:Object(U.jsx)(Ue.a,{})}),Object(U.jsx)(wt.a,{sx:{ml:1,flex:1},id:"worktypeSearchVal",placeholder:"Search",variant:"outlined",value:this.state.searchVal,onChange:this.searchItems}),Object(U.jsx)(f.a,{color:"primary",sx:{p:"10px"},"aria-label":"directions",onClick:this.clearSearch,children:Object(U.jsx)(bt.a,{})})]}),Object(U.jsx)(W.a,{item:!0,lg:1,sm:12,xs:12,style:{justifyContent:"end",display:"flex",alignItems:"center"},children:Object(U.jsx)(L.a,{variant:"contained",size:"small",disabled:!this.state.changed,style:{color:"#196dc4",backgroundColor:"#fff"},startIcon:Object(U.jsx)(Ce.a,{}),onClick:function(){return e.props.handleSave(e.state.jobItems,e.state.groupPercent,e.props.jobLevel)},children:"Claim"})})]})})}),this.props.finishedItems&&this.props.finishedItems.length>0&&Object(U.jsxs)(Gt.a,{children:[Object(U.jsx)(Ut.a,{expandIcon:Object(U.jsx)(_t.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(U.jsx)(G.a,{children:Object(U.jsx)("b",{children:"Completed Items"})})}),Object(U.jsx)(Vt.a,{children:Object(U.jsx)(st.a,{hover:"true",m:1,children:Object(U.jsx)(nt.a,{style:{width:"100%",marginButtm:"40px!important"},children:Object(U.jsx)("ul",{children:this.props.finishedItems.map((function(e,t){return Object(U.jsx)("li",{children:e})}))})})})})]}),this.state.jobItems&&this.state.jobItems.length>=1&&Object(U.jsx)(st.a,{hover:"true",m:1,style:{backgroundColor:"#eee"},children:Object(U.jsx)(nt.a,{style:{width:"100%",marginButtom:"40px!important"},colSpan:"2",children:this.props.jobLevel&&Object(U.jsx)("div",{children:Object(U.jsxs)(W.a,{container:!0,spacing:2,children:[Object(U.jsxs)(W.a,{item:!0,xs:12,sm:12,lg:2,children:["All Items"," ",this.props.settings.ShowStandardTime&&" ("+Ne.timeConvert(Math.round(t/60))+")"]}),Object(U.jsx)(W.a,{item:!0,xs:12,sm:12,lg:5,children:Object(U.jsx)(Qt,{ThumbComponent:Yt,"aria-label":"ios slider",value:this.state.groupPercent,getAriaValueText:n,"aria-labelledby":"discrete-slider",valueLabelDisplay:"on",step:this.props.settings.IncrementPercentage,marks:!0,min:0,max:100,onChangeCommitted:function(t,n){return e.handleGroupedChanged(n)},onChange:function(t,n){return e.handleChanged(n)}})}),Object(U.jsx)(W.a,{item:!0,xs:12,sm:12,lg:2,children:Object(U.jsx)(pe.a,{value:this.state.groupPercent,onChange:function(t){return e.handleGroupedChanged(t.target.value)},type:"number",name:"pgs",fullWidth:!0})}),Object(U.jsx)(W.a,{item:!0,xs:4,sm:4,lg:1,style:{textAlign:"right"},children:Object(U.jsx)(L.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleGroupedChanged(parseInt(e.state.groupPercent)-e.props.settings.IncrementPercentage,!0)},startIcon:Object(U.jsx)(zt.a,{})})}),Object(U.jsx)(W.a,{item:!0,xs:4,sm:4,lg:1,children:Object(U.jsx)(L.a,{variant:"contained",color:"primary",onClick:function(){return e.handleGroupedChanged(parseInt(e.state.groupPercent)+e.props.settings.IncrementPercentage,!0)},startIcon:Object(U.jsx)(Ft.a,{})})}),Object(U.jsx)(W.a,{item:!0,xs:4,sm:4,lg:1,children:Object(U.jsx)(L.a,{variant:"contained",color:"#196dc4",border:"#196dc4",backgroundColor:"#fff",onClick:function(){return e.handleGroupedChanged(100)},children:"100%"})})]})})})}),!0!==this.props.jobLevel&&this.state.jobItems&&this.state.jobItems.map((function(t,a){return Object(U.jsx)(st.a,{hover:"true",children:Object(U.jsx)(nt.a,{style:{width:"100%"},colSpan:"2",children:Object(U.jsxs)(W.a,{container:!0,spacing:2,children:[Object(U.jsxs)(W.a,{item:!0,xs:12,sm:12,lg:2,style:{marginTop:"20px"},children:[t.ItemNumber,"-",t.Name,e.props.settings.ShowStandardTime&&"("+Ne.timeConvert(Math.round(t.StdTime/60))+")"]}),Object(U.jsx)(W.a,{item:!0,xs:12,sm:12,lg:5,style:{marginTop:"20px"},children:Object(U.jsx)(Qt,{ThumbComponent:Yt,"aria-label":"ios slider",value:t.Progress100,getAriaValueText:n,"aria-labelledby":"discrete-slider",valueLabelDisplay:"on",step:e.props.settings.IncrementPercentage,marks:!0,min:0,max:100,onChangeCommitted:function(t,n){return e.handleChange(n,a)},onChange:function(t,n){return e.handleChange(n,a)}})}),Object(U.jsx)(W.a,{item:!0,xs:12,sm:12,lg:2,children:Object(U.jsx)(pe.a,{value:t.Progress100||"",onChange:function(t){return e.handleChange(t.target.value,a)},type:"number",name:"pgs-".concat(t.name),fullWidth:!0},a)}),Object(U.jsx)(W.a,{item:!0,xs:4,sm:4,lg:1,style:{textAlign:"right"},children:Object(U.jsx)(f.a,{"aria-label":"remove",onClick:function(){return e.handleBtn(-e.props.settings.IncrementPercentage,a)},children:Object(U.jsx)(zt.a,{})})}),Object(U.jsx)(W.a,{item:!0,xs:4,sm:4,lg:1,children:Object(U.jsx)(f.a,{"aria-label":"add",onClick:function(){return e.handleBtn(e.props.settings.IncrementPercentage,a)},children:Object(U.jsx)(Ft.a,{})})}),Object(U.jsx)(W.a,{item:!0,xs:4,sm:4,lg:1,children:Object(U.jsx)(L.a,{borderRadius:"5%",variant:"contained",style:{backgroundColor:"white",color:"#196dc4",borderRadius:"5%",border:"1px solid #196dc4"},onClick:function(){return e.handleComplete(a)},children:"100%"})})]})})})}))]})})}),Object(U.jsx)(Mt.a,{style:{justifyContent:"flex-end",marginRight:"20px"},children:Object(U.jsx)(L.a,{variant:"contained",size:"small",disabled:!this.state.changed,style:{color:"#196dc4",backgroundColor:"#fff"},startIcon:Object(U.jsx)(Ce.a,{}),onClick:function(){return e.props.handleSave(e.state.jobItems,e.state.groupPercent,e.props.jobLevel)},children:"Claim"})})]})})}}]),n}(r.a.Component),qt=Object(_e.a)((function(e){return{search:Object(h.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ft.b)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(ft.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(h.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}),{withTheme:!0})(Zt),Kt=n(267),Xt=n.n(Kt),$t=n(268),en=n.n($t),tn=n(266),nn=n.n(tn),an=n(232),rn=n.n(an),sn=n(417),on=n(94),cn=n(32),ln=Object(_e.a)((function(){return{root:{display:"flex",margin:"auto",flexDirection:"row"}}}),{name:"LegendRoot"})((function(e){var t=e.classes,n=Object(o.a)(e,["classes"]);return Object(U.jsx)(on.d.Root,Object(c.a)(Object(c.a)({},n),{},{className:t.root}))})),dn=Object(_e.a)((function(){return{label:{whiteSpace:"nowrap"}}}),{name:"LegendLabel"})((function(e){var t=e.classes,n=Object(o.a)(e,["classes"]);return Object(U.jsx)(on.d.Label,Object(c.a)({className:t.label},n))})),jn=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(U.jsx)(M.a,{children:Object(U.jsxs)(on.c,{data:this.props.Columns,children:[Object(U.jsx)(on.a,{}),Object(U.jsx)(on.f,{}),Object(U.jsx)(on.b,{name:"Actual",valueField:"actual",argumentField:"country",color:"#9abf47"}),Object(U.jsx)(on.b,{name:"V6. Std",valueField:"std",argumentField:"country",color:"#adadad"}),Object(U.jsx)(cn.a,{}),Object(U.jsx)(on.d,{position:"bottom",rootComponent:ln,labelComponent:dn}),Object(U.jsx)(on.e,{text:"Performance"}),Object(U.jsx)(cn.i,{})]})})}}]),n}(a.PureComponent),bn=Object(B.a)({btn:{marginRight:"20px",marginLeft:"20px",backgroundColor:"white",color:"#196dc4"},textarea:{display:"block",width:"100%",overflow:"hidden",resize:"both",minHight:"40px",lineHeight:"20px"},root:{backgroundColor:"#fff"}});function un(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],s=n[1],i=bn(),o=0,c=e.claimingItems.filter((function(e){return e.Progress100!==e.Main_Progress100})).length,l=e.totalPhyCalimgMinutes/(e.jobLevel?1:c),d=[];function j(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(0);return t}return Object(U.jsxs)(a.Fragment,{children:[window.scrollTo(0,0),Object(U.jsxs)(ce.a,{className:i.root,children:[Object(U.jsxs)(W.a,{container:!0,spacing:3,style:{margin:"30px"},children:[Object(U.jsx)(W.a,{item:!0,lg:1,sm:2,xs:4,children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",onClick:function(){e.handleBack(e.isFullJob?2:e.isAdminJob?1:3)},startIcon:Object(U.jsx)(kt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:10,sm:10,xs:8,children:Object(U.jsx)("span",{style:{fontSize:"24px",fontWeight:"bold"},children:Object(U.jsx)("b",{children:"Claim"})})})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(Mt.a,{style:{justifyContent:"flex-end"},children:[Object(U.jsx)(L.a,{variant:"contained",size:"small",className:i.btn,startIcon:Object(U.jsx)(Ce.a,{}),onClick:function(){return e.handleSubmit(r,e.isAdminJob)},children:"Save"}),Object(U.jsx)(L.a,{variant:"contained",size:"small",className:i.btn,style:{color:"white",backgroundColor:"#196dc4"},startIcon:Object(U.jsx)(Z.a,{}),onClick:function(){return e.handleSubmit(r,e.isAdminJob,!0)},children:"Save & Logout"})]}),Object(U.jsx)(Mt.a,{children:Object(U.jsx)(W.a,{container:!0,spacing:3,children:Object(U.jsxs)(W.a,{item:!0,lg:9,sm:12,xs:12,children:[Object(U.jsx)(nn.a,{}),Object(U.jsxs)("span",{style:{fontSize:"1rem"},children:[" ",Object(U.jsx)("b",{children:"Job: "})," ",e.jobName]})]})})}),Object(U.jsx)(le.a,{children:Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsxs)(W.a,{item:!0,lg:6,sm:12,xs:12,children:[Object(U.jsxs)(S.a,{children:[Object(U.jsxs)(C.a,{children:[Object(U.jsx)(Ke.a,{children:Object(U.jsx)(ve.a,{children:Object(U.jsx)(Xt.a,{})})}),Object(U.jsx)(P.a,{primary:Object(U.jsx)(G.a,{variant:"h6",style:{fontSize:"1rem"},children:"Worker"}),secondary:Object(U.jsx)(G.a,{style:{fontSize:"1rem"},children:e.claimingName})})]}),Object(U.jsx)(g.a,{variant:"inset",component:"li"}),!e.isFullJob&&Object(U.jsxs)(C.a,{children:[Object(U.jsx)(Ke.a,{children:Object(U.jsx)(ve.a,{children:Object(U.jsx)(en.a,{})})}),Object(U.jsx)(P.a,{primary:Object(U.jsx)(G.a,{variant:"h6",style:{fontSize:"1rem"},children:"Work Type"}),secondary:Object(U.jsx)(G.a,{style:{fontSize:"1rem"},children:e.worktypeName})})]}),Object(U.jsx)(g.a,{variant:"inset",component:"li"}),!e.isAdminJob&&e.jobLevel&&Object(U.jsxs)(C.a,{children:[Object(U.jsx)(Ke.a,{children:Object(U.jsx)(ve.a,{children:Object(U.jsx)(rn.a,{})})}),Object(U.jsx)(P.a,{primary:Object(U.jsx)(G.a,{variant:"h6",style:{fontSize:"1rem"},children:"Claiming"}),secondary:Object(U.jsx)(a.Fragment,{children:Object(U.jsxs)(G.a,{style:{fontSize:"1rem"},children:[e.mainPercent,"% to:",e.groupPercent,"% "," took: ",Ne.timeConvert(l)," - Std: ",Ne.timeConvert(e.claimingItems.reduce((function(e,t){return e+t.StdTime}),0)*(e.groupPercent-e.mainPercent)/6e3)]})})})]}),!e.isAdminJob&&!e.jobLevel&&Object(U.jsxs)(C.a,{children:[Object(U.jsx)(Ke.a,{children:Object(U.jsx)(ve.a,{children:Object(U.jsx)(rn.a,{})})}),Object(U.jsx)(P.a,{primary:Object(U.jsx)(G.a,{variant:"h6",style:{fontSize:"1rem"},children:"Claiming"}),secondary:e.claimingItems.filter((function(e){return e.Progress100!==e.Main_Progress100})).map((function(t){return Object(U.jsxs)(a.Fragment,{children:[Object(U.jsxs)(G.a,{style:{fontSize:"1rem"},children:[t.Name,": (",t.Main_Progress100,"% to:",t.Progress100,"% ",") took: ",Ne.timeConvert(l)," - Std: ",Ne.timeConvert(t.StdTime*(t.Progress100-t.Main_Progress100)/6e3)]},t.id),Object(U.jsxs)("span",{style:{fontSize:"0.0rem"},children:[o=d.filter((function(e){return e.name==t.Name})).length+1,!e.jobLevel&&d.push({id:t.OId,name:t.Name,country:o>1?t.Name+j(o):t.Name,actual:l,std:t.StdTime*(t.Progress100-t.Main_Progress100)/6e3})]})]})}))})]})]}),e.jobLevel&&Object(U.jsx)("span",{style:{fontSize:"0.0rem"},children:d.push({country:e.worktypeName,actual:l,std:e.claimingItems.reduce((function(e,t){return e+t.StdTime}),0)*(e.groupPercent-e.mainPercent)/6e3})}),e.settings.PSEnableIndividual&&Object(U.jsx)(jn,{Columns:d,Title:"Performance"})]}),Object(U.jsx)(W.a,{item:!0,lg:5,sm:12,xs:12,children:Object(U.jsx)(sn.a,{"aria-label":"minimum height",style:{fontSize:"20px"},value:r,onChange:function(e){return s(e.target.value)},className:i.textarea,rowsMin:20,placeholder:"Comment"})})]})}),Object(U.jsxs)(Mt.a,{style:{justifyContent:"flex-end"},children:[Object(U.jsx)(L.a,{variant:"contained",size:"small",className:i.btn,startIcon:Object(U.jsx)(Ce.a,{}),onClick:function(){return e.handleSubmit(r,e.isAdminJob)},children:"Save"}),Object(U.jsx)(L.a,{variant:"contained",size:"small",className:i.btn,style:{color:"white",backgroundColor:"#196dc4"},startIcon:Object(U.jsx)(Z.a,{}),onClick:function(){return e.handleSubmit(r,e.isAdminJob,!0)},children:"Save & Logout"})]})]})]})}var hn=n(209),mn=n.n(hn),pn=n(211),gn=n.n(pn),On=n(210),xn=n.n(On),fn=n(212),yn=n.n(fn);function vn(e){return Object(U.jsxs)(Gt.a,{defaultExpanded:!0,children:[Object(U.jsx)(Ut.a,{expandIcon:Object(U.jsx)(_t.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(U.jsxs)(G.a,{variant:"h4",component:"div",children:[e.label,e.menuIsOpen?"":"("+e.claimingName+")"," "]})}),Object(U.jsx)(Vt.a,{}),Object(U.jsxs)(W.a,{container:!0,spacing:1,children:[Object(U.jsx)(W.a,{ml:0,item:!0,lg:12,sm:12,xs:12,md:12,children:Object(U.jsx)("hr",{})}),e.loading&&Object(U.jsx)(mt,{mainRoute:e.mainRoute}),!e.loading&&e.jobs&&e.jobs.sort((function(e,t){return e.JobStageOrder-t.JobStageOrder})).filter((function(t){return"post"==e.activeButton&&"postproduction"==t.JobStageName||"pre"==e.activeButton&&"preproduction"==t.JobStageName||"prod"==e.activeButton&&"production"==t.JobStageName||"site"==e.activeButton&&"SiteWork"==t.JobStageName})).filter((function(t){return"site"!=e.activeButton&&t.WorkTypes.length>0||"site"==e.activeButton})).filter((function(e){return e.WorkTypes.some((function(e){return e.Progress<100}))})).map((function(t){var n;return Object(U.jsx)(W.a,{item:!0,lg:e.jobs.length>48?1:2,sm:6,xs:12,className:e.classes.bolding,children:Object(U.jsx)(xt.a,(n={borderRadius:"5%",p:1,boxShadow:4,color:"white",className:e.classes.boxBolding,style:{paddingLeft:"30px",paddingRight:"30px"},bgcolor:"production"==t.JobStageName?"#9abf47":"preproduction"==t.JobStageName?"#b3b31b":"postproduction"==t.JobStageName?"#b4bebf":"white",spacing:3},Object(h.a)(n,"style",{width:"100%",height:"100%",fontSize:"0.8rem",textAlign:"center"}),Object(h.a)(n,"onClick",(function(){e.handleJobClick(t.OId)})),Object(h.a)(n,"children",Object(U.jsxs)(W.a,{container:!0,style:{color:"black"},children:[Object(U.jsxs)(x.a,{only:["sm","md","xl","lg"],children:[Object(U.jsx)(W.a,{item:!0,lg:4,xs:4,sm:4,md:4,children:""!==t.Note&&t.Note.length>0&&Object(U.jsx)(f.a,{color:"inherit",onClick:function(n){e.setNote(t.Note),e.setOpenDialog(!0),n.stopPropagation()},children:Object(U.jsx)(Lt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:4,sm:4,md:4,children:Object(U.jsx)("span",{style:{fontSize:"large"},children:t.Code})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:4,sm:4,md:4,children:Object(U.jsx)(Bt,{value:t.Progress})})]}),Object(U.jsxs)(x.a,{only:["xs"],children:[Object(U.jsx)(W.a,{item:!0,lg:6,xs:6,sm:6,md:6,style:{backgroundColor:"#718d35"},children:""!==t.Note&&t.Note.length>0&&Object(U.jsx)(f.a,{color:"inherit",onClick:function(n){e.setNote(t.Note),e.setOpenDialog(!0),n.stopPropagation()},children:Object(U.jsx)(Lt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:6,xs:6,sm:6,md:6,style:{backgroundColor:"#718d35"},children:Object(U.jsx)(Bt,{value:t.Progress})}),Object(U.jsx)(W.a,{item:!0,lg:12,xs:12,sm:12,md:12,children:Object(U.jsx)("hr",{})}),Object(U.jsx)(W.a,{item:!0,lg:12,xs:12,sm:12,md:12,children:Object(U.jsx)(W.a,{item:!0,lg:12,xs:12,sm:12,md:12,children:Object(U.jsx)("span",{style:{fontSize:"large"},children:t.Code})})})]}),Object(U.jsx)(W.a,{item:!0,lg:12,xs:12,sm:12,md:12,children:Object(U.jsx)("hr",{})}),Object(U.jsx)(W.a,{item:!0,lg:12,xs:12,sm:12,md:12,children:Object(U.jsxs)("div",{style:{fontSize:"small"},children:[" ",t.Title]})})]})),n))},t.OId)}))]})]})}var Sn=n(213),Cn=n.n(Sn),kn=n(233),Pn=n.n(kn);n(357);function In(e){Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var t=yt(),n=Object(a.useState)(!1),r=Object(u.a)(n,2),s=r[0],i=r[1],o=Object(a.useState)([]),c=Object(u.a)(o,2),l=c[0],d=c[1],j=Object(a.useState)(e.IsSitWorkGroup?"site":"prod"),b=Object(u.a)(j,2),h=b[0],m=b[1],p=Object(a.useState)(e.jobs),g=Object(u.a)(p,2),O=g[0],x=g[1],y=Object(a.useState)(!0),v=Object(u.a)(y,2),S=(v[0],v[1],Object(a.useState)([])),C=Object(u.a)(S,2),k=(C[0],C[1],Object(a.useState)([])),P=Object(u.a)(k,2),I=(P[0],P[1],Object(a.useState)([])),w=Object(u.a)(I,2),T=(w[0],w[1]),A=Object(a.useState)([]),J=Object(u.a)(A,2),B=J[0],N=J[1],R=Object(a.useState)(!1),E=Object(u.a)(R,2),z=E[0],D=E[1],F=Object(a.useState)(""),M=Object(u.a)(F,2),V=M[0],H=M[1],_=Object(a.useState)(!1),Q=Object(u.a)(_,2),Y=Q[0],q=Q[1],K=Object(a.useState)(!0),X=Object(u.a)(K,2),$=(X[0],X[1]),ee=Object(a.useState)((new Date).addDays(-7)),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(new Date),se=Object(u.a)(re,2),de=se[0],je=se[1],be=Object(a.useState)([]),ue=Object(u.a)(be,2),he=ue[0],me=ue[1],ge=Object(a.useState)([]),Oe=Object(u.a)(ge,2),xe=Oe[0],fe=Oe[1],ye=Object(a.useState)([]),ve=Object(u.a)(ye,2),Se=ve[0],Ce=ve[1],ke=Object(a.forwardRef)((function(e,t){var n=e.value,a=e.onClick;return Object(U.jsx)(pe.a,{sx:{ml:1,flex:1},onClick:a,ref:t,value:n})}));function Pe(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(oe.a)(ie.a.mark((function t(n){var a,r;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!Y){t.next=3;break}return q(!1),t.abrupt("return");case 3:return t.prev=3,t.next=6,Nt.GetPerfStatByAPI(e.claimingOId,ne.toLocaleDateString("en-US"),de.toLocaleDateString("en-US"),e.apiRoute);case 6:a=t.sent,r=JSON.parse(a.data),(a=[]).push({country:r.PointName,name:r.PointName,actual:r.Actual,std:r.Std}),me(a),q(!0),$(!0),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),t.t0.response?alert("Error in calling Get performance stat. API- ".concat(t.t0.response)):alert("Error in calling Get performance stat. API- ".concat(t.t0.message));case 18:case"end":return t.stop()}}),t,null,[[3,15]])})))).apply(this,arguments)}function we(t){var n=[],a=[];if(fe([]),Ce([]),x([]),e.divideJobs){for(var r=0;r<t.length;r++){var s=t[r];s.WorkTypes.filter((function(e){return e.Progress<100})).map((function(e){return e.OId})).filter((function(t){return e.primaryWorktypeIds.includes(t)})).length>0?n.push(s):a.push(s)}fe(n),Ce(a)}else x(t)}function Te(t){var n="post"===t?4:"pre"===t?2:"prod"===t?3:"site"===t?4:3;we([]),H(""),D(!0),Nt.getJobsOfWorkerFromApi(e.apiRoute,e.claimingOId,n,"site"===t).then((function(n){var a=JSON.parse(n.data);T(a.Item1),we(a.Item1),B.push(t),N(B),e.handleJobLoaded(a.Item1),D(!1)})).catch((function(e){alert("Error in retrieve Jobs list")})),m(t)}return Object(a.useEffect)((function(){we(e.jobs)}),[]),Object(U.jsx)(a.Fragment,{children:Object(U.jsx)(ce.a,{style:{backgroundColor:"#ebedf1"},children:Object(U.jsxs)(le.a,{children:[Object(U.jsxs)(W.a,{container:!0,spacing:2,children:[Object(U.jsx)(W.a,{item:!0,ml:0,lg:1,sm:2,xs:2,children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",style:{textAlign:"right"},onClick:function(){e.handleBack(0)},startIcon:Object(U.jsx)(kt.a,{})})}),Object(U.jsx)(W.a,{item:!0,lg:2,sm:9,xs:9,children:Object(U.jsx)("span",{style:{fontSize:"18px",marginTop:"30px"},children:Object(U.jsx)("b",{children:"Job\xa0Selection"})})}),Object(U.jsxs)(W.a,{item:!0,lg:5,md:12,sm:12,xs:12,children:[Object(U.jsx)(f.a,{sx:{p:"10px"},"aria-label":"menu",children:Object(U.jsx)(mn.a,{})}),Object(U.jsx)(lt.c,{sx:{ml:1,flex:1},placeholder:"Search",variant:"outlined",value:V,onChange:function(t){var n=t.target.value;H(n),e.divideJobs?(fe(t.target.value.length>0?xe.filter((function(e){return e.Title.toLowerCase().includes(n.toLowerCase())||e.Code.includes(n)})):xe),Ce(t.target.value.length>0?Se.filter((function(e){return e.Title.toLowerCase().includes(n.toLowerCase())||e.Code.includes(n)})):Se)):we(t.target.value.length>0?O.filter((function(e){return e.Title.toLowerCase().includes(n.toLowerCase())||e.Code.includes(n)})):O)}}),Object(U.jsx)(f.a,{color:"primary",sx:{p:"10px"},"aria-label":"directions",onClick:function(){return H(""),we([]),void we(e.jobs)},children:Object(U.jsx)(bt.a,{})})]}),Object(U.jsx)(W.a,{item:!0,ml:0,lg:2,sm:6,md:6,xs:6,style:{textAlign:"right"},children:e.settings.PSEnableIndividual&&Object(U.jsx)(L.a,{variant:"outlined",size:"small",onClick:function(){return Pe(!0)},children:"Performance"})}),Object(U.jsx)(W.a,{item:!0,ml:0,lg:2,md:6,sm:6,xs:6,style:{textAlign:"right"},children:Object(U.jsx)(L.a,{variant:"outlined",size:"small",onClick:function(){return e.handleLogOut(e.claimingOId)},startIcon:Object(U.jsx)(Z.a,{}),children:"Logout"})})]}),!Y&&Object(U.jsxs)(a.Fragment,{children:[Object(U.jsxs)(Gt.a,{defaultExpanded:!0,children:[Object(U.jsx)(Ut.a,{expandIcon:Object(U.jsx)(_t.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(U.jsxs)(G.a,{variant:"h4",component:"div",children:["Jobs"," ",e.menuIsOpen?"":"("+e.claimingName+")"," ",Object(U.jsx)("hr",{})]})}),Object(U.jsxs)(Vt.a,{children:[Object(U.jsx)(W.a,{ml:1,item:!0,lg:2,sm:1,xs:1}),Object(U.jsx)(W.a,{ml:0,item:!0,lg:2,sm:3,xs:3,style:{textAlign:"right"},children:!e.settings.HidePreProductionJobs&&Object(U.jsx)(L.a,{variant:"pre"==h?"contained":"outlined",style:{color:"pre"==h?"white":"black",backgroundColor:"pre"==h?"#196dc4":"white"},size:"small",onClick:function(){return Te("pre")},startIcon:Object(U.jsx)(xn.a,{}),fullWidth:!0,children:"Pre\xa0Prod."})}),Object(U.jsx)(W.a,{ml:0,item:!0,lg:2,sm:3,xs:3,style:{textAlign:"right"},children:Object(U.jsx)(L.a,{variant:"prod"==h?"contained":"outlined",style:{color:"prod"==h?"white":"black",backgroundColor:"prod"==h?"#196dc4":"white"},size:"small",onClick:function(){return Te("prod")},startIcon:Object(U.jsx)(gn.a,{}),fullWidth:!0,children:Object(U.jsx)("span",{children:"\xa0\xa0\xa0Prod.\xa0\xa0\xa0\xa0\xa0"})})}),Object(U.jsx)(W.a,{ml:0,item:!0,lg:2,sm:3,xs:3,style:{textAlign:"right"},children:!e.settings.HidePostProductionJobs&&Object(U.jsx)(L.a,{variant:"post"==h?"contained":"outlined",style:{color:"post"==h?"white":"black",backgroundColor:"post"==h?"#196dc4":"white"},startIcon:Object(U.jsx)(yn.a,{}),size:"small",onClick:function(){return Te("post")},fullWidth:!0,children:"Post\xa0Prod."})}),Object(U.jsx)(W.a,{ml:0,item:!0,lg:2,sm:3,xs:3,style:{textAlign:"right"},children:Object(U.jsx)(L.a,{variant:"site"==h?"contained":"outlined",style:{color:"site"==h?"white":"black",backgroundColor:"site"==h?"#196dc4":"white"},startIcon:Object(U.jsx)(Cn.a,{}),size:"small",onClick:function(){return Te("site")},fullWidth:!0,children:"Site\xa0Work."})})]}),e.settings.DividJobs&&Object(U.jsxs)("div",{children:[Object(U.jsx)(vn,{label:"Primary Jobs",menuIsOpen:e.menuIsOpen,claimingName:e.claimingName,loading:z,jobs:xe,handleJobClick:e.handleJobClick,setNote:d,setOpenDialog:i,classes:t,activeButton:h,mainRoute:e.mainRoute}),Object(U.jsx)(vn,{label:"Secondary Jobs",menuIsOpen:e.menuIsOpen,claimingName:e.claimingName,loading:z,jobs:Se,handleJobClick:e.handleJobClick,setNote:d,setOpenDialog:i,classes:t,activeButton:h,mainRoute:e.mainRoute})]}),!e.divideJobs&&Object(U.jsx)(vn,{label:"Jobs",menuIsOpen:e.menuIsOpen,claimingName:e.claimingName,loading:z,jobs:O,handleJobClick:e.handleJobClick,setNote:d,setOpenDialog:i,classes:t,activeButton:h,mainRoute:e.mainRoute})]}),Object(U.jsxs)(Gt.a,{defaultExpanded:!0,children:[Object(U.jsx)(Ut.a,{expandIcon:Object(U.jsx)(_t.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(U.jsxs)(G.a,{variant:"h4",component:"div",children:["Admin Jobs"," ",e.menuIsOpen?"":"("+e.claimingName+")"," ",Object(U.jsx)("hr",{})]})}),Object(U.jsx)(Vt.a,{}),Object(U.jsx)(W.a,{container:!0,spacing:1,children:e.jobs&&e.adminJobs.map((function(n){return Object(U.jsx)(W.a,{item:!0,lg:2,sm:6,xs:12,className:t.bolding,children:Object(U.jsx)(xt.a,{borderRadius:"5%",p:4,boxShadow:4,color:"black",spacing:3,style:{width:"100%",height:"100%",fontSize:"0.9rem",textAlign:"center",backgroundColor:"#efefef"},onClick:function(){e.handleJobClick(n.OId,!0)},children:Object(U.jsx)("div",{children:n.Name})})},n.OId)}))})]})]}),Y&&Object(U.jsxs)("div",{children:[Object(U.jsxs)(W.a,{container:!0,style:{marginBottom:"20px",marginTop:"40px",textAlign:"right"},children:[Object(U.jsx)(W.a,{item:!0,lg:12,sm:12,xs:12,children:Object(U.jsx)("hr",{})}),Object(U.jsx)(W.a,{item:!0,lg:8,sm:4,xs:12,style:{marginTop:"30px"},children:Object(U.jsx)(L.a,{variant:"contained",onClick:function(){return Pe(!1)},children:"Show"})}),Object(U.jsx)(W.a,{item:!0,lg:2,sm:4,xs:6,children:Object(U.jsxs)("div",{children:[Object(U.jsx)("label",{children:"From"}),Object(U.jsx)(Pn.a,{style:{zIndex:"10000"},selected:ne,onChange:function(e){return ae(e)},customInput:Object(U.jsx)(ke,{})})]})}),Object(U.jsx)(W.a,{item:!0,lg:2,sm:4,xs:6,children:Object(U.jsxs)("div",{children:[Object(U.jsx)("label",{className:"datePickerLabel",children:"To"}),Object(U.jsx)(Pn.a,{customInput:Object(U.jsx)(ke,{}),selected:de,onChange:function(e){return je(e)},style:{zIndex:"10000"}})]})})]}),Object(U.jsx)(jn,{Columns:he,Title:"Performance"})]}),Object(U.jsx)(ct,{header:"Job Notes",uls:l,open:s,handleClose:function(){return i(!1)}})]})})})}function wn(e){return Object(a.useEffect)((function(){window.scrollTo(0,0)})),Object(U.jsxs)("div",{children:[Object(U.jsx)(x.a,{only:["xs","sm"],children:Object(U.jsx)(W.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(U.jsx)(W.a,{item:!0,xs:3,children:Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{style:{color:"grey",alignItems:"center",justifyContent:"center",paddingLeft:"35%"},children:"Claim\xa0Job"}),Object(U.jsx)(L.a,{id:"btnStart",name:"btnStart",className:"click",style:{backgroundImage:'url("'.concat(e.mainRoute,'start.png")'),backgroundColor:"#fff",backgroundPosition:"center",backgroundRepeat:"no-repeat",paddingTop:"-30px",width:"430px",height:"240px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"38px",fontSize:"40px"},onClick:e.start})]})})})}),Object(U.jsx)(x.a,{only:["xl","lg","md"],children:Object(U.jsx)(W.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(U.jsx)(W.a,{item:!0,xs:3,children:Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{style:{color:"grey",alignItems:"center",justifyContent:"center",paddingLeft:"35%"},children:"Claim\xa0Job"}),Object(U.jsx)(L.a,{id:"btnStart",name:"btnStart",className:"click",style:{backgroundImage:'url("'.concat(e.mainRoute,'start.png")'),backgroundColor:"#fff",backgroundPosition:"center",backgroundRepeat:"no-repeat",paddingTop:"-30px",width:"300px",height:"240px",display:"flex",justifyContent:"left",alignItems:"left",borderRadius:"38px",fontSize:"40px"},onClick:e.start})]})})})})]})}var Tn=new(function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getListOfWorkersFromApi=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.apiPost("".concat(n,"Workers/GetListOfWorkers?workerId=")+t,{},"Error in calling ESP (Get Workers List)");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.searchNames=function(e,t){var n=e.target.value;return e.target.value.length>0?t.filter((function(e){return e.Name.toLowerCase().includes(n.toLowerCase())})):t},e.saveLoginInAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{},r={OId:t,Code:n},{"Content-Type":"application/json"},e.next=5,Ne.apiPost("".concat(a,"Workers/PostLoginWorker"),r,"");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),e.saveLogoutAPI=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{},r={OId:t,Code:n},e.prev=2,{"Content-Type":"application/json"},e.next=6,Ne.apiPost("".concat(a,"Workers/PostLogoutWorker"),r);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(2),e.t0.response?alert("Error in calling ESP (Logout) API- ".concat(e.t0.response.data)):alert("Error in calling ESP (Logout) API- ".concat(e.t0)),window.location.href=".";case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),e.getAsyncSettingsApi=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a,r){var s,i;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="bearer "+e.getLocalToken(),t.prev=1,Be.a.defaults.headers.post.Authorization=s,Be.a.defaults.headers.post["Content-type"]="application/json",t.next=6,Be.a.post("".concat(e.props.apiRoute,"AdminSettings/GetInfo"),null);case 6:return i=t.sent,t.abrupt("return",i);case 10:t.prev=10,t.t0=t.catch(1),alert("Error in calling ESP (".concat(r,") API- ").concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n,a){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"checkWorkerLateLogin",value:function(e,t,n){if(t){var a=new Date,r=new Date(e.StartTime),s=new Date(r);return s.setMinutes(r.getMinutes()+n),s<a}return!1}},{key:"checkWorkerEarlyLeave",value:function(e,t,n){if(t){var a=new Date,r=new Date(e.EndTime),s=new Date(r);return s.setMinutes(r.getMinutes()-n),s>a}return!1}},{key:"render",value:function(){return Object(U.jsx)("din",{})}}]),n}(r.a.Component)),Ln=n(541),An=n(539),Jn=n(540),Bn=n(538);function Nn(e){var t=r.a.useState(""),n=Object(u.a)(t,2),a=n[0],s=n[1],i=r.a.useState(!0),o=Object(u.a)(i,2),c=o[0],l=o[1],d=function(){e.doSaving&&e.onCommentSave(a,!e.logout),l(!0)};return Object(U.jsx)("div",{children:Object(U.jsxs)(Qe.a,{open:e.open,onClose:d,"aria-labelledby":"form-dialog-title",children:[Object(U.jsx)(Bn.a,{id:"form-dialog-title",children:e.header}),Object(U.jsxs)(An.a,{children:[Object(U.jsx)(Jn.a,{children:e.text}),!e.alert&&Object(U.jsx)(de.a,{autoFocus:!0,margin:"dense",id:"name",label:e.placeholer,type:"text",fullWidth:!0,onChange:function(e){s(e.target.value),l(e.target.value.length<5),s(e.target.value)},onKeyDown:function(e){e.target.value.length>5&&"Enter"===e.key&&d()}})]}),Object(U.jsx)(Ln.a,{children:Object(U.jsx)(L.a,{onClick:d,color:"primary",disabled:!e.alert&&c,children:e.alert?"Ok":"Save"})})]})})}var Rn=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).getPBJobItems=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){var r,s,i;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!0})),r=e.state.LabelText,t.next=4,Nt.getJobItemsFromApi(n,a,e.state.claimingOId,e.props.apiRoute);case 4:s=t.sent,i=JSON.parse(s.data),r.push(e.props.fromPB?e.props.jobCode:i.WorkType.Name),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobId:n,jobLevel:i.WorkType.JobLevel,workTypeName:i.WorkType.Name,jobItems:i.jobItems,mainJobItems:i.jobItems,finishedItems:i.finishedItems,canClaimWholeJob:i.canClaimWholeJob,totalPhyCalimgMinutes:i.totalPhyCalimgMinutes,totalProgress:i.totalProgress,page:3,loading:!1,worktypeId:a,LabelText:r,JobTitle:i.JobTitle}),(function(){e.props.changeStep(5,r,e.state.isAdminJob)}));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.goBackToStart=function(t){e.state.page===t&&e.setState(Object(c.a)(Object(c.a)({},e.state),{},{page:-1}))},e.start=Object(oe.a)(ie.a.mark((function t(){return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!0}),(function(){e.loadWorkersList()}));case 1:case"end":return t.stop()}}),t)}))),e.loadWorkersList=Object(oe.a)(ie.a.mark((function t(){var n,a;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Tn.getListOfWorkersFromApi(e.props.workerId,e.props.apiRoute);case 3:n=t.sent,a=JSON.parse(n.data),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{workersList:a,mainWorkersList:a,loading:!1,settings:e.props.settings,LabelText:[],page:0}),(function(){if(e.props.changeStep(2,[],e.state.isAdminJob),0!==e.props.workerId){var t=a.find((function(t){return t.OId==e.props.workerId}));t&&t.IsLoggedIn&&e.loggedInWorkerClick(t)}})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),alert("Error in fetching Workers list ");case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.onCommentSave=function(){var t=Object(oe.a)(ie.a.mark((function t(n){var a,r=arguments;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!(r.length>1&&void 0!==r[1])||r[1],!n){t.next=9;break}if(!a){t.next=7;break}return t.next=5,e.saveLoginInAPI(e.state.claimingOId,n,e.props.apiRoute);case 5:t.next=9;break;case 7:return t.next=9,e.saveLogoutAPI(e.state.claimingOId,n,e.props.apiRoute);case 9:e.setState(Object(c.a)(Object(c.a)({},e.state),{},{dialogOpen:!1}),(function(){e.props.logout,ae.a}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loggedInWorkerClick=function(t){var n=[];n.push(t.Name);var a=t.Skills.filter((function(e){return e.Primary})).map((function(e){return e.WorkTypeId})),r=t.Skills.filter((function(e){return e.Secondary})).map((function(e){return e.WorkTypeId}));e.setState(Object(c.a)(Object(c.a)({},e.state),{},{LabelText:n,claimingUser:t.Name,claimingOId:t.OId,claiminWorker:t,primaryWorktypeIds:a,secondaryWorktypeIds:r,IsSitWorkGroup:t.Skills.find((function(e){return e.IsSitework&&e.Primary}))}),(function(){e.props.fromPB?e.getPBJobItems(e.props.jobId,e.props.workTypeId):(e.props.changeStep(3,n,e.state.isAdminJob),e.goToJobsPage(1,t.OId))}))},e.handleLogin=function(t,n,a){if(a||e.props.logout)e.handleLogOut(t);else{if(n)return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{dialogOpen:!0,dialogHeader:"Cannot Login",dialogText:"You are currenly on leave.Please, log in during your working hours",dialogSave:e.onCommentSave,alert:!0})),!1;var r=parseInt(t),s=e.state.workersList.filter((function(e){return e.OId===r}))[0];if(e.props.setClaimingId(r),s.IsLoggedIn)e.loggedInWorkerClick(s);else{Tn.checkWorkerLateLogin(s,e.state.settings.TrackLateLogin,e.state.settings.LateAllowance)&&e.setState(Object(c.a)(Object(c.a)({},e.state),{},{claimingOId:r,claimingUser:s.Name,dialogOpen:!0,logoutClicked:!1,dialogHeader:"Late Login",dialogText:"Please, specify the reason to late log in.",dialogSave:e.onCommentSave,alert:!1,LabelText:[s.Name]})),s.LastDayNotLoggedOut?(e.setState(Object(c.a)(Object(c.a)({},e.state),{},{claimingOId:r,claimingUser:s.Name,logoutClicked:!1,dialogHeader:"Missing logout",dialogText:" You did not logout yesterday please advise your manager",doSaving:!0,alert:!0,LabelText:[s.Name],dialogOpen:!0,dialogSave:e.onCommentSave})),e.saveLoginInAPI(r,"",e.props.apiRoute)):e.saveLoginInAPI(r,"",e.props.apiRoute)}}},e.saveLoginInAPI=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){var r,s,i,o,l;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.workersList,s=r.filter((function(e){return e.OId===n}))[0],i=[],t.next=5,Tn.saveLoginInAPI(n,a,e.props.apiRoute);case 5:if(o=t.sent,JSON.parse(o.data).Successful){t.next=9;break}return alert(o.Message),t.abrupt("return");case 9:s.IsLoggedIn=!0,-1!==(l=r.findIndex((function(e){return e.OId===n})))&&(r[l]=s),i.push(s.Name),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{claimingOId:n,claimingUser:s.Name,workersList:r,LabelText:i}),(function(){e.props.fromPB?e.getPBJobItems(e.props.jobId,e.props.workTypeId):e.props.changeStep(3,i,e.state.isAdminJob)}));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleLogOut=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){var r,s;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.workersList,s=r.filter((function(e){return e.OId===n}))[0],!Tn.checkWorkerEarlyLeave(s,e.state.settings.TrackEarlyLeave,e.state.settings.EarlyLeaveAllowance)){t.next=6;break}e.setState(Object(c.a)(Object(c.a)({},e.state),{},{claimingOId:n,claimingUser:s.Name,dialogOpen:!0,logoutClicked:!0,dialogHeader:"Early Leave",dialogText:"Please, specify the reason to early leaving.",dialogSave:e.onCommentSave,alert:!1,LabelText:[s.Name]})),t.next=10;break;case 6:return t.next=8,e.saveLogoutAPI(n,a,e.props.apiRoute);case 8:t.sent,e.props.logout?(ae.a,"".concat(e.props.apiRoute,"ProductionBoard")):e.setState(Object(c.a)(Object(c.a)({},e.state),{},{page:-1}),(function(){ae.a,"".concat(e.props.apiRoute,"claim")}));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleJobLoaded=function(t){var n=e.state.jobs,a=e.state.mainJobs;n.push.apply(n,Object(Ot.a)(t)),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobs:n,mainJobs:a}),(function(){return!0}))},e.saveLogoutAPI=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){var r,s,i;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn.saveLogoutAPI(n,a,e.props.apiRoute);case 2:if(r=t.sent,(s=JSON.parse(r.data)).Successful){t.next=7;break}return alert(s.Message),t.abrupt("return",!1);case 7:i=e.setWorkerLOgout(n),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{page:0,workersList:i,dialogOpen:!1}),(function(){e.props.changeStep(2,[],e.state.isAdminJob)}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.setWorkerLOgout=function(t){var n=e.state.workersList,a=n.filter((function(e){return e.OId===t}))[0];a.IsLoggedIn=!1;var r=n.findIndex((function(e){return e.OId===t}));return-1!==r&&(n[r]=a),n},e.searchNames=function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{workersList:Tn.searchNames(t,e.state.mainWorkersList)}))},e.clearSearchWorkTypes=function(){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{workTypes:e.state.mainWorkTypes}))},e.handleWorkTypeClick=function(){var t=Object(oe.a)(ie.a.mark((function t(n){var a,r,s,i;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!0})),a=e.state.mainWorkTypes.find((function(e){return e.OId==n})),r=e.state.LabelText,t.next=5,Nt.getJobItemsFromApi(e.state.jobId,n,e.state.claimingOId,e.props.apiRoute);case 5:s=t.sent,i=JSON.parse(s.data),r.push(a.Name),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobLevel:a.JobLevel,jobItems:i.jobItems,mainJobItems:i.jobItems,finishedItems:i.finishedItems,canClaimWholeJob:i.canClaimWholeJob,totalPhyCalimgMinutes:i.totalPhyCalimgMinutes,totalProgress:i.totalProgress,page:3,loading:!1,worktypeId:n,LabelText:r,workTypeName:a.Name}),(function(){e.props.changeStep(5,r,e.state.isAdminJob)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchJobs=function(t){var n=t.target.value,a=t.target.value.length>0?e.state.mainJobs.filter((function(e){return e.Title.toLowerCase().includes(n.toLowerCase())||e.Code.includes(n)})):e.state.mainJobs,r=t.target.value.length>0?e.state.mainAdminJobs.filter((function(e){return e.Name.toLowerCase().includes(n.toLowerCase())})):e.state.mainAdminJobs;e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobs:a,adminJobs:r}))},e.handleFullJob=function(){var t=e.state.LabelText;t.push("Full Job"),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{page:4,isFullJob:!0,LabelText:t}),(function(){e.props.changeStep(6,t,e.state.isAdminJob)}))},e.goToJobsPage=function(){var t=Object(oe.a)(ie.a.mark((function t(n,a){var r,s;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!0})),!e.state.IsSitWorkGroup){t.next=7;break}return t.next=4,Nt.getJobsOfWorkerFromApi(e.props.apiRoute,a,3,!0);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,Nt.getJobsOfWorkerFromApi(e.props.apiRoute,a,3);case 9:t.t0=t.sent;case 10:r=t.t0,s=JSON.parse(r.data),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobs:s.Item1,mainJobs:s.Item1,adminJobs:s.Item2,mainAdminJobs:s.Item2,loading:!1,claimingOId:a,page:n}));case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleBack=function(t){var n=e.state.LabelText;switch(t){case 0:n=[];break;case 1:n=n.slice(0,1);break;case 2:n=n.slice(0,2)}2==t&&e.props.fromPB&&(t=0,n=[]),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{page:t,LabelText:n,jobs:e.state.mainJobs,jobItems:e.state.mainJobItems,adminJobs:e.state.mainAdminJobs,workersList:e.state.mainWorkersList,workTypes:e.state.mainWorkTypes}),(function(){e.props.changeStep(t+2,e.state.LabelText,e.state.isAdminJob)}))},e.handleJobClick=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n){var a=e.state.adminJobs.find((function(e){return e.OId===t}));(r=e.state.LabelText).push(a.Name),r[2]="",e.setState(Object(c.a)(Object(c.a)({},e.state),{},{adminWorkType:a,page:4,isAdminJob:n,LabelText:r}),(function(){e.props.changeStep(6,r,e.state.isAdminJob)}))}else{var r,s=e.state.jobs,i=s.find((function(e){return e.OId===t}));(r=e.state.LabelText).push(i.Code),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{jobId:t,workTypes:i.WorkTypes,mainWorkTypes:i.WorkTypes,selectedJobCode:i.Code,page:2,isAdminJob:!1,LabelText:r,JobTitle:i.Code}),(function(){e.props.changeStep(4,r,e.state.isAdminJob)}))}},e.handleSaveClaim=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.setState(Object(c.a)(Object(c.a)({},e.state),{},{changedClaimingItems:t,groupPercent:n,page:4}),(function(){e.props.changeStep(5,e.state.LabelText,e.state.isAdminJob)}))},e.handleSubmitClaim=function(){var t=Object(oe.a)(ie.a.mark((function t(n){var a,r,s,i=arguments;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.length>1&&void 0!==i[1]&&i[1],r=i.length>2&&void 0!==i[2]&&i[2],e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!0})),a){t.next=18;break}if(!e.state.isFullJob){t.next=11;break}return t.next=7,Nt.submitFullJobClaimInAPI(e.state.claimingOId,e.state.jobId,n,e.props.apiRoute);case 7:t.sent,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!1,page:"a"==e.props.role||e.props.public?-1:1,LabelText:[]}),(function(){"a"==e.props.role||e.props.public?e.props.changeStep(1,[],e.state.isAdminJob):e.props.changeStep(2,[],e.state.isAdminJob)})),t.next=16;break;case 11:return s=e.state.groupPercent>0?e.state.jobItems:e.state.jobItems.filter((function(e){return e.Progress100!==e.Main_Progress100})),t.next=14,Nt.submitClaimInAPI(e.state.claimingOId,e.state.jobId,s,e.state.groupPercent,n,r,e.props.apiRoute);case 14:t.sent,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!1,page:-1,LabelText:[],workersList:r?e.setWorkerLOgout(e.state.claimingOId):e.state.workersList}),(function(){e.props.fromPB?e.props.history.push("".concat(e.props.mainRoute,"productionBoard")):"a"==e.props.role||e.props.public?e.props.changeStep(1,[],e.state.isAdminJob):e.props.changeStep(2,[],e.state.isAdminJob)}));case 16:t.next=22;break;case 18:return t.next=20,Nt.submitAdminJobClaimInAPI(e.state.claimingOId,e.state.adminWorkType.OId,n,r,e.props.apiRoute);case 20:t.sent,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!1,page:-1,LabelText:[],workersList:r?e.setWorkerLOgout(e.state.claimingOId):e.state.workersList}),(function(){"a"==e.props.role||e.props.public?e.props.changeStep(1,[],e.state.isAdminJob):e.props.changeStep(2,[],e.state.isAdminJob)}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFullSubmitClaim=function(e){},e.state={workersList:[],settings:null,mainWorkersList:[],workTypes:[],mainWorkTypes:[],jobs:[],mainJobs:[],adminJobs:[],mainAdminJobs:[],claimingOId:0,claimingUser:"",claiminWorker:{},page:-1,loading:!1,worktypeId:0,workTypeName:"",jobId:0,isAdminJob:!1,adminWorkType:null,jobItems:[],mainJobItems:[],primaryJobs:[],secondaryJobs:[],changedClaimingItems:[],canClaimWholeJob:!1,claimingFullJob:!1,dialogOpen:!1,dialogHeader:"",dialogText:"",dialogSave:null,totalPhyCalimgMinutes:0,LabelText:[],isFullJob:!1,logoutClicked:!1,totalProgress:0,finishedItems:[],logoutChecked:!1,groupPercent:0,IsSitWorkGroup:!1,doSaving:!0},e}return Object(d.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.props.fromPB?this.setState(Object(c.a)(Object(c.a)({},this.state),{},{loading:!0}),(function(){e.loadWorkersList()})):this.setState(Object(c.a)(Object(c.a)({},this.state),{},{page:-1}))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(U.jsxs)(a.Fragment,{children:[Object(U.jsx)(Nn,{logout:this.state.logoutClicked,header:this.state.dialogHeader,text:this.state.dialogText,placeholer:"Please describe",open:this.state.dialogOpen,onCommentSave:this.state.dialogSave,alert:this.state.alert,doSaving:this.state.doSaving}),Object(U.jsx)("div",{style:{backgroundColor:"#ebedf1",paddingRight:"10px",height:"100%"},children:function(){if(e.state.loading)return Object(U.jsx)(mt,{mainRoute:e.props.mainRoute});switch(e.state.page){case-1:return Object(U.jsx)(wn,{mainRoute:e.props.mainRoute,start:e.start});case 0:return Object(U.jsx)(It,{items:e.state.workersList,searchNames:e.searchNames,handleLogin:e.handleLogin,settings:e.state.settings,logoutChecked:e.state.logoutChecked,loggingOut:e.props.logout,fromPB:e.props.fromPB,apiRoute:e.props.apiRoute,mainRoute:e.props.mainRoute,goBackToStart:e.goBackToStart});case 1:return Object(U.jsx)(In,{claimingOId:e.state.claimingOId,claimingName:e.state.claimingUser,searchJobs:e.searchJobs,jobs:e.state.mainJobs,adminJobs:e.state.adminJobs,primaryJobs:e.state.primaryJobs,secondaryJobs:e.state.secondaryJobs,prejobs:e.state.prejobs,postjobs:e.state.postjobs,settings:e.state.settings,handleJobClick:e.handleJobClick,handleBack:e.handleBack,handleLogOut:e.handleLogOut,handleJobLoaded:e.handleJobLoaded,menuIsOpen:240==e.props.menuSize,IsSitWorkGroup:e.state.IsSitWorkGroup,apiRoute:e.props.apiRoute,divideJobs:e.state.settings.DividJobs,mainRoute:e.props.mainRoute,primaryWorktypeIds:e.state.primaryWorktypeIds});case 2:return Object(U.jsx)(Rt,{claimingOId:e.state.claimingOId,settings:e.props.settings,workTypes:e.state.workTypes,handleBack:e.handleBack,handleWorkTypeClick:e.handleWorkTypeClick,handleFullJob:e.handleFullJob,jobCode:e.state.selectedJobCode,claimingName:e.state.claimingUser,menuIsOpen:240==e.props.menuSize,primaryWorktypeIds:e.state.primaryWorktypeIds,secondaryWorktypeIds:e.state.secondaryWorktypeIds,apiRoute:e.props.apiRoute});case 3:return Object(U.jsx)(qt,{claimingOId:e.state.claimingOId,searchJobs:e.searchJobs,items:e.state.mainJobItems,finishedItems:e.state.finishedItems,totalProgress:e.state.totalProgress,handleBack:e.handleBack,handleSave:e.handleSaveClaim,settings:e.props.settings,canClaimWholeJob:e.state.canClaimWholeJob,jobLevel:e.state.jobLevel,claimingName:e.state.claimingUser,menuIsOpen:240==e.props.menuSize,jobName:e.state.adminWorkType?e.state.adminWorkType.Name:e.state.JobTitle,apiRoute:e.props.apiRoute});case 4:return Object(U.jsx)(un,{claimingOId:e.state.claimingOId,totalPhyCalimgMinutes:e.state.totalPhyCalimgMinutes,claimingName:e.state.mainWorkersList.find((function(t){return t.OId===e.state.claimingOId})).Name,worktypeName:e.state.isFullJob?"Full Job":e.state.adminWorkType?"Admin Work":e.state.workTypeName,jobName:e.state.adminWorkType?e.state.adminWorkType.Name:e.state.JobTitle,claimingItems:e.state.changedClaimingItems,isAdminJob:e.state.isAdminJob,handleBack:e.handleBack,isFullJob:e.state.isFullJob,handleSubmit:e.handleSubmitClaim,settings:e.props.settings,groupPercent:e.state.groupPercent,mainPercent:e.state.totalProgress,jobLevel:!!e.state.isAdminJob||(e.props.fromPB?e.props.jobLevel:e.state.mainWorkTypes.find((function(t){return t.OId==e.state.worktypeId})).JobLevel),apiRoute:e.props.apiRoute});default:return Object(U.jsx)("div",{})}}()})]})}}]),n}(r.a.Component),Wn=n(542),En=n(543);function zn(){return Object(U.jsxs)(G.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(U.jsx)(Wn.a,{color:"inherit",href:"https://www.aplnz.co.nz/",children:"APL"})," ",(new Date).getFullYear(),"."]})}var Dn=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Fn(e){var t=Dn(),n=Object(a.useState)(""),r=Object(u.a)(n,2),s=r[0],i=r[1],o=Object(a.useState)(""),c=Object(u.a)(o,2),l=c[0],d=c[1],j=function(){e.handleSignIn(s,l)};return Object(U.jsxs)(En.a,{component:"main",maxWidth:"xs",children:[Object(U.jsx)(p.a,{}),Object(U.jsxs)("div",{className:t.paper,children:[Object(U.jsx)("img",{src:"./APL.png",alt:"APL",style:{display:"block",marginLeft:"auto",marginRight:"auto"}}),Object(U.jsx)(G.a,{component:"h4",variant:"h4",children:"Sign in"}),Object(U.jsxs)("div",{className:t.form,noValidate:!0,children:[Object(U.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return function(e){i(e.target.value)}(e)}}),Object(U.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onKeyUp:function(e){return function(e){13===e.keyCode&&j(),d(e.target.value)}(e)}}),Object(U.jsx)(L.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,type:"text",onClick:j,children:"Sign In"})]})]}),Object(U.jsx)(xt.a,{mt:8,children:Object(U.jsx)(zn,{})})]})}var Mn=n(234),Gn=n.n(Mn),Un=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).usermanagementInitData=function(){Ne.apiPost("".concat(e.props.apiRoute,"Account/InitClaimUserManagement")).then((function(t){var n=t.data;e.setState({loginUsers:n.Item1,model:{Email:"",Password:"",EspUsers:n.Item2,IsAdmin:!1,IsPublic:!1,IsDisabled:!1,EspUserId:"",LoginId:""}})})).catch((function(e){alert("Error in getting user management Data")}))},e.onSave=function(){e.state.changePassword?Ne.apiPost("".concat(e.props.apiRoute,"Account/SetPassword"),{Id:e.state.model.LoginId,NewPassword:e.state.model.Password,ConfirmPassword:e.state.model.Password}).then((function(t){alert("Successfuly Save");var n=e.state.model;n.Email="",n.Password="",n.IsAdmin=!1,n.IsPublic=!1,n.IsDisabled=!1,n.EspUserId="",n.LoginId="",n.EspUsers.map((function(e){e.Selected=!1})),e.setState(Object(c.a)(Object(c.a)({},e.state),{},{model:n,changePassword:!1}))})).catch((function(e){e.response?alert("Error in saving new password"+e.response.data):alert("Error in saving new password"+e)})):Ne.apiPost("".concat(e.props.apiRoute,"Account/Register"),{Email:e.state.model.Email,Password:e.state.model.Password,ConfirmPassword:e.state.model.Password,IsAdmin:e.state.model.IsAdmin,IsPublic:e.state.model.IsPublic,UserId:e.state.model.EspUserId}).then((function(e){alert("Successfuly added"),ae.a})).catch((function(e){e.response?alert("Error in adding user"+e.response.data):alert("Error in adding user"+e),window.location.href="."}))},e.onChangePassword=function(t){var n=e.state.loginUsers.find((function(e){return e.Id==t})),a=e.state.model.EspUsers;if(!n.IsPublic){var r=a.find((function(e){return e.Value==n.WorkerId})),s=a.indexOf(r);r.Selected=!0,a.splice(s,1,r)}var i={Email:n.Email,IsAdmin:n.IsAdmin,IsPublic:n.IsPublic,EspUserId:n.WorkerId,LoginId:t,EspUsers:a};e.setState(Object(c.a)(Object(c.a)({},e.state),{},{changePassword:!0,model:i}),(function(){console.log(n.Email+" "+n.Name)}))},e.onPropertyChange=function(t){var n=e.state.model,a="";a=void 0!==t.target.type&&"checkbox"===t.target.type?t.target.checked:t.target.value,n[t.target.name]=a,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{model:n}))},e.onSelectChange=function(t){var n=e.state.model,a=t.target.value,r=[];n[t.target.name].map((function(e){e.Value===a?r.push({Value:e.Value,Text:e.Text,Selected:!0}):r.push({Value:e.Value,Text:e.Text,Selected:!1})})),n[t.target.name]=r,n.EspUserId=a,e.setState(Object(c.a)(Object(c.a)({},e.state),{},{model:n}))},e.state={loginUsers:[],model:{},changes:[],changePassword:!1},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.usermanagementInitData()}},{key:"render",value:function(){var e=this;return Object(U.jsxs)("div",{children:[Object(U.jsxs)(ce.a,{children:[Object(U.jsx)(ye.a,{title:"User Management",subheader:"",avatar:Object(U.jsxs)(ve.a,{"aria-label":"recipe",style:{backgroundColor:"blue"},children:[" ","U"," "]})}),Object(U.jsxs)(le.a,{children:[Object(U.jsxs)(W.a,{container:!0,spacing:3,children:[Object(U.jsx)(W.a,{item:!0,lg:4,xs:12,children:Object(U.jsx)(ge,{name:"Email",label:"Email",helptext:"",type:"email",onPropertyChange:this.onPropertyChange,value:this.state.model.Email})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:12,children:Object(U.jsx)(ge,{name:"Password",label:"Password",helptext:"",type:"password",onPropertyChange:this.onPropertyChange,value:this.state.model.Password})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:12,children:Object(U.jsx)(me,{name:"EspUsers",label:"User Id in ESP",helptext:"",items:this.state.model.EspUsers,onPropertyChange:this.onSelectChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:6,children:Object(U.jsx)(fe,{name:"IsAdmin",label:"Is admin user",checked:this.state.model.IsAdmin,onPropertyChange:this.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:6,children:Object(U.jsx)(fe,{name:"IsPublic",label:"Is Public User",checked:this.state.model.IsPublic,onPropertyChange:this.onPropertyChange})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:12,mx:"auto",children:Object(U.jsx)(L.a,{variant:"contained",color:"primary",size:"large",onClick:this.onSave,startIcon:Object(U.jsx)(Ce.a,{}),disabled:!(this.state.model.Email&&this.state.model.Password&&(this.state.model.EspUserId||this.state.model.IsPublic)),children:this.state.changePassword?"Save Password":"Add User"})}),Object(U.jsx)(W.a,{item:!0,lg:12,children:Object(U.jsx)("hr",{})})]}),Object(U.jsxs)(W.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[Object(U.jsxs)(x.a,{only:["xs"],children:[Object(U.jsx)(W.a,{item:!0,lg:4,xs:12,style:{backgroundColor:"#eee"},children:Object(U.jsx)("h4",{children:"Email"})}),Object(U.jsx)(W.a,{item:!0,lg:4,xs:12,style:{backgroundColor:"#eee"},children:Object(U.jsx)("h4",{children:"ESP User"})}),Object(U.jsx)(W.a,{item:!0,lg:1,xs:12,style:{backgroundColor:"#eee"},children:Object(U.jsx)("h4",{children:"Admin"})}),Object(U.jsx)(W.a,{item:!0,lg:1,xs:12,style:{backgroundColor:"#eee"},children:Object(U.jsx)("h4",{children:"Public User"})}),Object(U.jsx)(W.a,{item:!0,lg:2,xs:12,style:{backgroundColor:"#eee"},children:Object(U.jsx)("h4",{children:"Change Password"})})]}),Object(U.jsx)(W.a,{item:!0,lg:12,xs:12,children:Object(U.jsx)("hr",{})}),this.state.loginUsers.map((function(t){return Object(U.jsxs)(a.Fragment,{children:[Object(U.jsxs)(W.a,{item:!0,lg:4,xs:12,children:[Object(U.jsx)(x.a,{only:["sm","lg","xl","md"],children:"Email: "}),t.Email]}),Object(U.jsxs)(W.a,{item:!0,lg:4,xs:12,children:[Object(U.jsx)(x.a,{only:["sm","lg","xl","md"],children:"Name: "}),t.Name]}),Object(U.jsxs)(W.a,{item:!0,lg:1,xs:12,children:[Object(U.jsx)(x.a,{only:["sm","lg","xl","md"],children:"Admin:"}),t.IsAdmin?Object(U.jsx)(Gn.a,{}):Object(U.jsx)(Ze.a,{})]}),Object(U.jsxs)(W.a,{item:!0,lg:1,xs:12,children:[Object(U.jsx)(x.a,{only:["sm","lg","xl","md"],children:"Public:"}),t.IsPublic?Object(U.jsx)(Gn.a,{}):Object(U.jsx)(Ze.a,{})]}),Object(U.jsx)(W.a,{item:!0,lg:2,xs:12,children:Object(U.jsx)(L.a,{variant:"contained",color:"primary",size:"medium",onClick:function(){return e.onChangePassword(t.Id)},startIcon:Object(U.jsx)(Ce.a,{}),children:"Change Password"})}),Object(U.jsx)(W.a,{lg:12,xs:12,children:Object(U.jsx)("hr",{})})]})}))]})]})]}),Object(U.jsx)("hr",{})]})}}]),n}(r.a.Component),Vn=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).setSettings=function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loggedIn:!0,settings:t}))},e.getServerSettings=function(){try{var t="".concat(e.state.apiRoute,"AdminSettings/GetInfo"),n=(new ee.a).get("_claim");Ne.apiPost(t,n,"").then((function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loggedIn:!0,settings:JSON.parse(t.data),claims:n}),(function(){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{loading:!1}))}))})).catch((function(e){e.response?alert("Error in calling ESP (Admin Settings) API- ".concat(e.response.data)):alert("Error in calling ESP (Admin Settings) API- ".concat(e))}))}catch(a){alert("Error in calling ESP (Admin Settings) API- ".concat(a)),window.location.href="."}},e.setClaimingId=function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{claimingId:t}))},e.changeStep=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setState(Object(c.a)(Object(c.a)({},e.state),{},{step:t,texts:n,isAdmin:a}))},e.changeMenuSize=function(){10===e.state.menuSize?e.setState(Object(c.a)(Object(c.a)({},e.state),{},{menuSize:240})):e.setState(Object(c.a)(Object(c.a)({},e.state),{},{menuSize:10}))},e.handleSignIn=function(t,n){Ne.setAsyncApiToken(t,n,e.state.apiRoute).then((function(t){if(t&&t.data&&t.data.access_token){var n={user_t:t.data.access_token,a:t.data.a,p:t.data.p,w:t.data.w,pa:t.data.pa};(new ee.a).set("_claim",JSON.stringify(n),{path:"/"}),e.getServerSettings()}})).catch((function(e){return e&&e.response&&400===e.response.status?alert("Username and password are not match"):alert("Error in get security code"+e),null}))},e.claimOnPB=function(t,n,a,r){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{step:1,page:0,pbWorkTypeId:n,pbJobId:t,fromPB:!0,joblevel:a,jobCode:r}),(function(){e.props.history.push("".concat(e.state.mainRoute,"claimpb"))}))},e.logoutFromPB=function(){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{step:1,page:-1,fromPB:!1,logout:!0}),(function(){e.props.history.push("".concat(e.state.mainRoute,"claim"))}))},e.FadingRoute=function(e){var t=e.component,n=Object(o.a)(e,["component"]);return Object(U.jsx)(ae.b,Object(c.a)(Object(c.a)({},n),{},{render:function(e){return Object(U.jsx)(t,Object(c.a)({},e))}}))},e.state={step:0,page:-1,fromPB:!1,logout:!1,settings:null,texts:[],isAdmin:!1,loggedIn:!1,isPublic:!1,loading:!0,claimingId:0,workerName:"",joblevel:!1,jobCode:"",claims:{user_t:"",a:!1,p:!1,w:0,pa:0},menuSize:240,mainRoute:"",apiRoute:"",localSettings:{}},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("data.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{localSettings:t,mainRoute:t.route,apiRoute:t.apiRoute}),(function(){(new ee.a).get("_claim")&&e.getServerSettings()}))}))}},{key:"render",value:function(){var e=this,t=this.state.claims.a?"a":"u",n=this.state.claims.p,a=this.state.claims.w;return Object(U.jsxs)("div",{style:{backgroundColor:"#ebedf1"},children:[this.state.loading&&this.state.loggedIn&&Object(U.jsx)(mt,{mainRoute:this.state.mainRoute}),!this.state.loggedIn&&Object(U.jsx)(Fn,{handleSignIn:this.handleSignIn}),this.state.loggedIn&&"u"===t&&Object(U.jsxs)("div",{style:{display:"flex"},children:[Object(U.jsx)(ne,{step:this.state.step,texts:this.state.texts,isAdmin:this.state.isAdmin,isSystemAdmin:!1,ShowProductionBoard:this.state.settings.PBShowProductionBoard,menuSize:this.state.menuSize,changeMenuSize:this.changeMenuSize}),Object(U.jsxs)("main",{style:{flexGrow:1,paddingLeft:"30px",paddingRight:"10px",paddingTop:"80px"},children:[Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"claim"),render:function(t){return Object(U.jsx)(Rn,Object(c.a)({public:n,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute,settings:e.state.settings,setClaimingId:e.setClaimingId,fromPB:!1,logout:e.state.logout,jobId:e.state.pbJobId,workTypeId:e.state.pbWorkTypeId,changeStep:e.changeStep,workerId:a,menuSize:e.state.menuSize,page:e.state.page,jobLevel:e.state.joblevel},t))}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"claimpb"),render:function(t){return Object(U.jsx)(Rn,Object(c.a)({public:n,settings:e.state.settings,setClaimingId:e.setClaimingId,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute,fromPB:e.state.fromPB,logout:e.state.logout,jobId:e.state.pbJobId,workTypeId:e.state.pbWorkTypeId,jobLevel:e.state.joblevel,changeStep:e.changeStep,workerId:a,menuSize:e.state.menuSize,page:e.state.page,jobCode:e.state.jobCode},t))}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"productionBoard"),render:function(t){return Object(U.jsx)(gt,{settings:e.state.settings,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute,claimingId:e.state.claimingId,claimOnPB:e.claimOnPB,logoutFromPB:e.logoutFromPB})}})]})]}),this.state.loggedIn&&"a"===t&&Object(U.jsxs)("div",{style:{display:"flex"},children:[Object(U.jsx)(ne,{step:this.state.step,texts:this.state.texts,isAdmin:this.state.isAdmin,isSystemAdmin:!0,menuSize:this.state.menuSize,changeMenuSize:this.changeMenuSize}),Object(U.jsxs)("main",{style:{flexGrow:1,paddingLeft:"30px",paddingRight:"0px",paddingTop:"80px",marginLeft:0===this.state.menuSize?"-100px":"0px"},children:[Object(U.jsx)("div",{style:{drawerPaper:{width:this.state.menuSize}}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"claim"),render:function(t){return Object(U.jsx)(Rn,Object(c.a)({public:!1,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute,settings:e.state.settings,setClaimingId:e.setClaimingId,changeStep:e.changeStep,isUser:!1,fromPB:!1,logout:e.state.logout,jobId:e.state.pbJobId,workTypeId:e.state.pbWorkTypeId,page:e.state.page,workerId:"0",menuSize:e.state.menuSize,jobLevel:e.state.joblevel},t))}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"claimpb"),render:function(t){return Object(U.jsx)(Rn,Object(c.a)({public:!1,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute,settings:e.state.settings,setClaimingId:e.setClaimingId,changeStep:e.changeStep,isUser:!1,fromPB:e.state.fromPB,logout:e.state.logout,jobId:e.state.pbJobId,workTypeId:e.state.pbWorkTypeId,jobLevel:e.state.joblevel,page:e.state.page,workerId:"0",menuSize:e.state.menuSize,jobCode:e.state.jobCode},t))}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"settings"),render:function(t){return Object(U.jsx)(Re,Object(c.a)({changeStep:e.changeStep,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute,getServerSettings:!0,onChangeSettings:e.setSettings},t))}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"performanceState"),component:re}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"users"),render:function(t){return Object(U.jsx)(Un,{apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute})}}),Object(U.jsx)(ae.b,{path:"".concat(this.state.mainRoute,"productionBoard"),render:function(t){return Object(U.jsx)(gt,{claimingId:e.state.claimingId,settings:e.state.settings,setClaimingId:e.setClaimingId,claimOnPB:e.claimOnPB,logoutFromPB:e.logoutFromPB,apiRoute:e.state.apiRoute,mainRoute:e.state.mainRoute})}})]})]})]})}}]),n}(r.a.Component),Hn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,563)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},_n=Object(ae.g)(Vn);i.a.render(Object(U.jsx)(R.a,{children:Object(U.jsx)(_n,{})}),document.getElementById("root")),Hn()}},[[399,1,2]]]);
//# sourceMappingURL=main.3b902ad8.chunk.js.map